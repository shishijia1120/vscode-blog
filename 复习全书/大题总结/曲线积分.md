## 曲线积分
### 一 定义
- **第一类曲线积分(对弧长的曲线积分)**：$Oxy$平面上分段光滑曲线$L$上函数$f(x,y)$的第一类曲线积分
$$\int_L f(x,y)ds$$

$f(x,y)$称作被积函数，$L$称作积分弧段.若$f(x,y)$在分段光滑曲线$L$上连续，则曲线积分$\int_L f(x,y)ds$一定存在.
如果积分弧段$L$是封闭曲线，则相应的对弧长的曲线积分记作$\oint_L f(x,y)ds(或\oint_L f(x,y,z)ds.)$
$\quad$
- **第二类曲线积分(对坐标曲线积分)**：$F=\{P(x,y),Q(x,y)\}$在定向分段光滑曲线$L$上的第二类曲线积分
$$\int_L P(x,y)dx+Q(x,y)dy$$

也记为$\int_L F \cdot ds.$
- **两类曲线积分的关系**：设$L_{\overbrace{AB}}$为分段光滑曲线，
$$\int_{L_{\overbrace{AB}}} Pdx+Qdy=\int_{L_{\overbrace{AB}}}(P\cos \alpha+Q\cos \beta)ds,$$

其中$\cos \alpha,\cos \beta$是曲线弧$L_{\overbrace{AB}}$沿从A到B的切线的方向余弦;推广到空间的情形，即为
$$\int_{L_{\overbrace{AB}}} Pdx+Qdy+Rdz=\int_{L_{\overbrace{AB}}}(P\cos \alpha+Q\cos \beta+R\cos \gamma)ds.$$

$\int_{L_{\overbrace{AB}}} Pdx+Qdy+Rdz=\int_{L_{\overbrace{AB}}} F\cdot \gamma ds$,其中,$F=\{P,Q,R\},ds=\{dx,dy,dz\},\gamma=(\cos \alpha,\cos \beta,\cos \gamma)是L_{\overbrace{AB}}$上任意点$(x,y,z)$处指向曲线方向的单位切向量.
上述两个公式表明第二类曲线积分可以化为第一类曲线积分，这也可以说是第二类曲线积分的一个计算方法.
$\qquad$
- **第一、二类曲线积分的比较**：第一类曲线积分与曲线的定向无关，而第二类曲线积分与曲线定向有关.若$L^+与L^-$是平面上同一条分段光滑曲线，但它们的定向不同，则
$$\int_{L^+} Pdx+Qdy=-\int_{L^-}Pdx+Qdy.$$


### 二 计算曲线积分
- 对于曲线积分将按两种方法:参数法与辅助线法。其中参数法对两类曲线积分都适用，而辅助线法只适用于第二类曲线积分。对于沿空间曲线的第二类积分，有时还要涉及斯托克公式。
#### 1. 利用参数法求曲线积分(先求曲线的参数方程，然后套公式)
- $I=\oint_L |xy| ds,其中L:\frac{x^2}{a^2}+\frac{y^2}{b^2}=1(a \gt b \gt 0);$
由于积分弧段的对称性与被积函数为偶函数，所以能够只在第一象限求积分.椭圆的参数方程为$x=a\cos t,y=b\sin t,$因此
$$\oint_L |xy|ds=4\int_0^{\frac{\pi}{2}} ab \sin t \cos t \sqrt{a^2 \sin^2 t+b^2 \cos^2 t}dt$$
$\qquad$
- $I=\int_L y^2ds,其中平面曲线L为旋轮线\begin{cases}
    x=a(t-\sin t),\\
    y=a(1-\cos t)
\end{cases}( 0 \leq t \leq 2\pi)的一拱;$
$$\int_L y^2ds=\int_0^{2\pi} a^2(1-\cos t)^2 \sqrt{a^2 (1-\cos t)^2 +a^2 \sin^2 t}dt$$
$\qquad$
-$I=\int_L (x+y)ds,其中L为双扭线r^2=a^2 \cos 2\theta(极坐标方程)的右面的一瓣.$ 
$L$是双扭线的右瓣:$r^2=a^2 \cos 2\theta, -\frac{\pi}{4} \leq \theta \leq \frac{\pi}{4}.L$关于$x$轴对称，$y$关于$y$为奇函数，于是具有$\int_L yds=0.$从而$I=\int_L xds.$由极坐标下曲线积分的计算公式得
$$I=\int_{-\frac{\pi}{2}}^{\frac{\pi}{2}} r(\theta) \cos \theta \sqrt{r^2(\theta)+r'^2(\theta)}d\theta.$$
。。。
$\quad$
$\quad$
$\quad$
$\quad$
$\quad$
#### 2. 利用辅助线法求曲线积分
##### 应用格林公式计算曲线积分
在应用格林公式计算曲线积分$\int_L Pdx+Qdy$时应注意两个条件:
- $L$必须是封闭曲线，若不封闭，要添加辅助线使之成为封闭的，当然添加部分的线积分必须易算出。
- $P(x,y),Q(x,y)$在考虑的区域上应有连续的偏导数，若存在奇点(即$P$或$Q$无定义或偏导数不存在或偏导数不连续的点)则不能直接用格林公式，必须挖掉奇点.这时，若除去奇点外，有
$$\frac{\partial Q}{\partial x} \equiv \frac{\partial P}{\partial y},$$
则求$\int_L Pdx+Qdy$可转化为求特殊的曲线积分$\int_C Pdx+Qdy.$
- **1. 直接用格林公式计算第二类曲线积分或估计第二类曲线积分**
$\quad$
$\quad$
$\quad$
$\quad$
$\quad$
- **2. 用格林公式求非闭曲线的第二类曲线积分**
$\quad$
$\quad$
$\quad$
$\quad$
$\quad$
- **3. 用格林公式把难求的曲线积分化为易求的曲线积分**
$\quad$
$\quad$
$\quad$
$\quad$
$\quad$
### 三 平面上曲线积分与路径无关问题及微分式的原函数问题
#### (一） 相关基本定义
- **路径无关**：设$D$是平面上的一个区域，若对$D$内任意两点$A,B$及$D$内从$A$点到$B$点的任意两条分段光滑曲线$L_1,L_2$，等式
$$\int_{L_1} Pdx+Qdy=\int_{L_2} Pdx+Qdy$$
- **微分式的原函数**：若在区域$D$内$\exists$函数$u(x,y)$，使得$du=Pdx+Qdy,$则称$u(x,y)$是$Pdx+Qdy$在区域$D$的原函数.
(1) 设$u(x,y)$是$P(x,y)dx+Q(x,y)dy$的原函数，则$Pdx+Qdy$的全体原函数为$u(x,y)+C,$其中$C$为$\forall$常数.
(2) 设$P(x,y),Q(x,y)$在区域$D$上连续，则
$$du=Pdx+Qdy((x,y) \in D) \Leftrightarrow \frac{\partial u}{\partial x}=P,\quad \frac{\partial u}{\partial y}=Q ((x,y) \in D).$$
#### (二) $\int_L Pdx+Qdy$与路径无关时的特征
- 设$P(x,y),Q(x,y)$在区域$D$上连续，则
$$\int_L Pdx+Qdy在D内与路径无关$$
$\Leftrightarrow$对$D$内任意分段光滑闭曲线$C,\oint_C Pdx+Qdy=0$
$\Leftrightarrow$在$D$内存在函数$u(x,y)$使得$du(x,y)=Pdx+Qdy(即\frac{\partial u}{\partial x}=P,\frac{\partial u}{\partial y}=Q.)$
$\quad$
- 设$P(x,y),Q(x,y)$在区域$D$有连续的一阶偏导数.
(1) 若$\int_L Pdx+Qdy$在$D$内与路径无关，则$\frac{\partial Q}{\partial x}=\frac{\partial P}{\partial y}((x,y) \in D);$
(2) 若$D$是单连通区域，又$\frac{\partial Q}{\partial x}=\frac{\partial P}{\partial y} ((x,y) \in D),$则$\int_L Pdx+Qdy$在$D$内与路径无关.
#### (三) 如何判断曲线积分$\int_L Pdx+Qdy$是否与路径无关
假设$P(x,y),Q(x,y)$在区域$D$有连续或有连续的一阶偏导数.
- 1. 由以下方法之一均可断定$\int_L Pdx+Qdy$在区域$D$不是与路径无关:
**方法1** 存在分段光滑闭曲线$C \subset D, \oint_C Pdx+Qdy \neq 0;$
**方法2** $\exists (x,y) \in D,\frac{\partial Q(x,y)}{\partial x} \neq \frac{\partial P(x,y)}{\partial y}.$
$\quad$
- 2. 由以下方法之一均可断定积分$\int_L Pdx+Qdy$在区域$D$内与路径无关:
**方法1** 求得$u(x,y)$使得$du=P(x,y)dx+Q(x,y)dy (\forall (x,y) \in D);$
**方法2** 若$D$是单连通区域，又$\frac{\partial Q}{\partial x}=\frac{\partial P}{\partial y}\quad((x,y) \in D);$
**方法3** $D=D_0 \ \{M_0\}，D_0$是单连通区域，点$M_0 \in D_0$(即$D$是单连通区域除去一个点).若$\frac{\partial Q}{\partial x}=\frac{\partial P}{\partial y} \quad (\forall (x,y) \in D),$又存在一条分段光滑闭曲线$C_0$，它包围点$M_0,\oint_{C_0} Pdx+Qdy=0.$

**例子**:
- $\int_L \frac{xdx+ydy}{\ln ^2{\sqrt{x^2+y^2}} +1} ，区域D:x^2+y^2 \gt 0.$

**解法1** 这里$D:R^2 \ \{(0,0)\}$是非单连通区域，由$\frac{\partial Q}{\partial x}=\frac{\partial P}{\partial y}\quad (\forall (x,y) \neq (0,0))$得不出积分与路径无关，但可以计算
$$\int_{x^2+y^2 =1} \frac{xdx+ydy}{\ln^2 1+1}=\int_{x^2+y^2 =1} xdx+ydy=0. \quad (在x^2+y^2 \leq 1上用格林公式) $$
因此，该积分与路径无关.

**解法2** 通过求原函数的方法来证明.由于
$$\frac{xdx+ydy}{\ln^2 r+1}=\frac{1}{2} \frac{d(x^2+y^2)}{\ln^2 r+1}=\frac{1}{2}\frac{dr^2}{\ln^2 r+1}=\frac{rdr}{\ln^2 r+1}$$

$$=d(\int_1^r \frac{tdt}{\ln^2 t+1})=d(\int_1^{\sqrt{x^2+y^2}} \frac{tdt}{\ln^2 t +1}),$$

即$D$上存在原函数$u(x,y)=\int_1^{\sqrt{x^2+y^2}} \frac{tdt}{\ln^2 t+1},du=\frac{xdx+ydy}{\ln^2 \sqrt{x^2+y^2}+1},$所以积分与路径无关.

- 设$(P(x,y),Q(x,y))=(\frac{x-y}{(x^2+y^2)^n}, \frac{x+y}{(x^2+y^2)^n}),n$为常数，问$\int_L Pdx+Qdy$在区域$D=\{(x,y) | (x,y) \in R^2,(x,y) \neq (0,0)\}$是否与路径无关.
**解** 先验证$\frac{\partial P}{\partial y}=\frac{\partial Q}{\partial x}$是否成立.
。。。
#### (四) 积分与路径无关时如何求$I=\int_{(x_1,y_1)}^{(x_2,y_2)} Pdx+Qdy$及求原函数的方法
- 1. 设$(P(x,y),Q(x,y))$在平面区域$D$内连续，又设积分$\int_L Pdx+Qdy$在$D$内与路径无关，则可按如下方法求曲线积分$I=\int_{\overbrace{AB}}Pdx+Qdy\quad (\overbrace{AB} \subset D):$
**方法$1^0$** 此时一定$\exists u(x,y)$使得$du=Pdx+Qdy(\forall(x,y) \in D),$若求得这种$u$,则
$$\int_{\overbrace{AB}}Pdx+Qdy=u(x,y)|_A^B=u(B)-u(A).$$
**方法2^0**选取特殊的路径代替$\overbrace{AB}.$
$\quad$
- 2. 设$(P(x,y),Q(x,y))$在区域$D$内连续,判断$Pdx+Qdy$在$D$存在原函数等同于判断$\int_L Pdx+Qdy在D$是否与路径无关，可用以下方法求原函数：
**方法1^0 不定积分法** ：由$\frac{\partial u}{\partial x}=P(x,y),$对$x$积分得$u=\int P(x,y)dx+C(y),由\frac{\partial u}{\partial y}=\frac{\partial}{\partial y}(\int P(x,y)dx+C'(y)=Q(x,y))$求出$C'(y)$(只是$y$的函数才行)，再求$C(y)$即可.
$\quad$
**方法$2^0$ 特殊路径积分法**：要先判断，若在单连通区域$D$内$\frac{\partial P}{\partial y}=\frac{\partial Q}{\partial x},$则积分与路径无关.于是$u(x,y)=\int_{(x_0,y_0)}^{(x,y)}Pdx+Qdy$是一个原函数，$(x_0,y_0)是D$中的定点，$(x,y)$是$D$中的动点，适当选取从$(x_0,y_0)到(x,y)$的路径来求这个积分.若在非单连通区域内$\frac{\partial P}{\partial y}=\frac{\partial Q}{\partial x},$则不能保证积分与路径无关，仍可取特殊路径求出$u(x,y)=\int_{(x_0,y_0)}^{(x,y)}Pdx+Qdy$.但需进一步验证，若$\frac{\partial u}{\partial x}=P(x,y),\frac{\partial u}{\partial y}=Q(x,y)在D$成立，则$u(x,y)$就是$Pdx+Qdy在D$的一个原函数.否则$Pdx+Qdy在D$就不$\exists$原函数.
$\quad$
**方法$3^0$ 观察法**.
$\quad$
- 设$Pdx+Qdy=\frac{2x(1-e^y)}{(1+x^2)^2}dx+\frac{e^y}{1+x^2}dy,求u(x,y),使du=Pdx+Qdy.$
**不定积分法**:。。。
**特殊路径积分法**：判断得知全平面积分与路径无关，$\forall(x,y) \in R^2,$
$$u(x,y)=\int_{(0,0)}^{(x,y)}Pdx+Qdy=\int_0^x P(x,0)dx+\int_0^y Q(x,y)dy,$$
这里取折现$OAM$为积分路径，$O(0,0),A(x,0),M(x,y)$:
沿$\overline{OA}:y=0,dy=0,得\int_{\overline{OA}}Pdx+Qdy=\int_0^x P(x,0)dx;$
沿$\overline{AM}:dx=0得\int_{\overline{AM}}Pdx+Qdy=\int_0^y Q(x,y)dy.$
代入$P,Q$表达式得
$$u(x,y)=\int_0^x 0dx+\int_0^y \frac{e^y}{1+x^2}dy=\frac{e^y}{1+x^2}|_0^y=\frac{e^y-1}{1+x^2}.$$
这是一个原函数，全体原函数是$u(x,y)=\frac{e^y-1}{1+x^2}+C.$
$\quad$
- 设$f(s)在(-\infty,+\infty)$内有连续的导数，计算
$$I=\int_L \frac{1+y^2f(xy)}{y}dx+\frac{x}{y^2}[y^2 f(xy)-1]dy,$$
其中$L$从点$A(3,\frac{2}{3})到B(1,2)$的直线段.
**解法1**:先验算积分是否与路径无关.若是，便可选择适当的积分路径，使积分化简.
$$\frac{\partial P}{\partial y}=\frac{y^2 f(xy)+xy^3 f'(xy)-1}{y^2}=\frac{\partial Q}{\partial x} \quad (y \gt 0)$$
这是单连通区域，故积分与路径无关，可以选择从$A$到$B$的任何一条位于$x$轴上方的曲线作为积分路径.
为了简化计算，选择积分路径为折现ACB,其中$C(1,\frac{2}{3})$
$\overline{AC}:y=\frac{2}{3},x$从3到1，$dy=0;$
$\overline{CB}:x=1,y$从$\frac{2}{3}$到2，$dx=0.$
$I=\int_3^1 \frac{1+\frac{4}{9}f(\frac{2}{3}x)}{\frac{2}{3}}dx+\int_{\frac{2}{3}}^2 \frac{1}{y^2} [y^2f(y)-1]dy$
$=-\int_3^1 \frac{3}{2} dx-\int_1^3 \frac{2}{3}f(\frac{2}{3}x)dx+\int_{\frac{2}{3}}^2 f(y)dy-\int_{\frac{2}{3}}^2 \frac{dy}{y^2}.$
$=-3-\int_{\frac{2}{3}}^2 f(y)dy+\int_{\frac{2}{3}}^2 f(y)dy+\frac{1}{y}|_{\frac{2}{3}}^2=-3+\frac{1}{2}+-\frac{3}{2}=-4.$
$\quad$
**解法2**:求出被积表达式的原函数，然后求原函数的改变量.因为
$\frac{1+y^2f(xy)}{y}dx+\frac{x}{y^2}[y^2f(xy)-1]dy=\frac{ydx-xdy}{y^2}+f(xy)(ydx+xdy)$
$=d(\frac{x}{y})+f(xy)d(xy)=d[\frac{x}{y}+\int_1^{xy}f(s)ds],$
所以$I=[\frac{x}{y}+\int_1^{xy}f(s)ds]|_{(3,\frac{2}{3})}^{(1,2)}=\frac{1}{2}+\int_1^2f(s)ds-\frac{9}{2}-\int_1^2 f(s)ds=-4.$
**注意**：本题若只假设$f(x)在(-\infty,+\infty)$连续，而没有假定它有连续的导数，则解法1失效，因为这时$P,Q$不一定有偏导数，但解法2仍然有效.
##### 1. $Pdx+Qdy$存在原函数与原函数的求解问题
$\quad$
$\quad$
$\quad$
$\quad$
$\quad$

##### 2. 由$Pdx+Qdy$存在原函数的条件确定其中待定的函数
$\quad$
$\quad$
$\quad$
$\quad$
$\quad$

##### 3. 判断曲线积分与路径无关并求积分
- 计算曲线积分$I=\int_L \frac{x-y}{x^2+y^2}dx+\frac{x+y}{x^2+y^2}dy,$其中$L$是从点$A(-a,0)$经上半椭圆$\frac{x^2}{a^2}+\frac{y^2}{b^2}=1(y \geq 0)$到点$B(a,0)$的弧段.
**分析**:$记P=\frac{x-y}{x^2+y^2},\quad Q=\frac{x+y}{x^2+y^2},$易算
$$\frac{\partial P}{\partial y}=\frac{y^2-2xy-x^2}{(x^2+y^2)^2}=\frac{\partial Q}{\partial x}.$$
在上半面(含$x$轴但不含原点为单连通区域)曲线积分与路径无关，因此求沿椭圆的曲线积分可以化为沿半圆周的曲线积分
$\quad$
**解** 设$C$是从点$A(-a,0)$经上半圆$x^2+y^2=a^2(y \geq 0)$到点$B(a,0)$的弧段.因此上半平面(含x轴单不含原点)积分与路径无关，于是得
$$I=\int_L \frac{x-y}{x^2+y^2} dx+\frac{x+y}{x^2+y^2}dy=\int_C \frac{x-y}{x^2+y^2} dx+\frac{x+y}{x^2+y^2}dy$$

$$=\frac{1}{a^2} \int_C (x-y)dx+(x+y)dy.$$

对右端的线积分，可直接使用$C$的参数方程$x=a\cos t,y=a\sin t(\pi \geq t \geq 0),$来计算:
$$I=\int_\pi ^0 [(\cos t -\sin t)(-\sin t)+(\cos t +\sin t)\cos t]dt=-\pi.$$
##### 4. 由曲线积分与路径无关条件确定被积表达式中某些待定的函数
$\quad$
$\quad$
$\quad$
$\quad$
$\quad$