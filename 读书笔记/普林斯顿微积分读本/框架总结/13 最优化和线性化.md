## 13 最优化和线性化
微积分的两个实际应用：最优化和线性化。
### 13.1 最优化
#### 13.1.1 一个简单的最优化例子
#### 13.1.2 最优化问题：一般方法
- 1.识别出所以你可能用到的变量，其中之一应该是你想要最大化和最小化的量Q。
- 2.试探一下当前情况的极端可能，看变量能最大或最小到多少。
- 3.写出关联起不同变量的各个方程，其中之一应该是关于Q的方程。
- 4.努力通过这些方程消去其他变量，使得Q可以表示为只关于一个变量的函数。
- 5.对Q关于那个变量求导，然后找出临界点。要记住，临界点出现在导数为0或不存在的位置。
- 6.求出Q在临界点及端点所对应的值，从中选出最大值和最小值。使用一阶或二阶导数的符号表格对临界点进行分类，加以检验。
- 7.写出所得到的结论。
#### 13.1.3 一个最优化的例子
#### 13.1.4 另一个最优化的例子
要求$v=16\pi$，使用尽可能少的金属，使用尽可能少的金属，因为金属的成本为2美分每平方英寸。怎么成本最低？此时每个罐子的成本最低$r,h \in (0,\infty),v=16\pi ,v=\pi r^2h.$
$$16\pi = \pi r^2 h$$

$$h=\frac{16}{r^2}$$

圆柱体的表面积A为：$A=2\pi r h +2\pi r^2$

成本是C ：2美分乘以总面积，所以有：$C=2A=4\pi r h +4\pi r^2$

消去$h，h=\frac{16}{r^2}$，代入方程：$C=4\pi r(\frac{16}{r^2})+4\pi r^2=4\pi(\frac{16}{r}+r^2)，r\in (0,\infty)$

$\frac{dc}{dr}=4\pi(-\frac{16}{r^2}+2r),r\in (0,\infty)$

$f'(c)=0,r=2.$

端点$r=0$，代入C，无法直接代入C，但可以求此时的极限：
$$\lim\limits_{r \to 0^+}C=\lim\limits_{r \to 0^+}4\pi(\frac{16}{r}+r^2)=\infty$$

另一个端点 $\infty,$
$$\lim\limits_{r \to \infty}C=\lim\limits_{r \to \infty}4\pi(\frac{16}{r}+r^2)=\infty$$

**结论**:在$r=2$点有局部最小值和全局最小值。可以通过一阶或二阶导数的符号表格来检验一下。
采用二阶导数的方法：
$$\frac{d^2}{dr^2}=4\pi(\frac{32}{r^3}+2)$$

当$r \in (0,\infty)$上时，二阶导数始终为正。当$r=2$时，它为正，所以在这里必有局部最小值。

#### 13.1.5 在最优化问题中使用隐函数求导
$$C=4\pi r h+4\pi r^2和r^2h=16.$$

通过消去$h$而最小化$C$，但还有一种最小化C的方法。两边同时关于$r$作隐函数求导。

$\frac{dc}{dr}=4\pi(h+r.\frac{dh}{dr}+2r)和2rh+r^2\frac{dh}{dr}=0$

从第二个方程求解$\frac{dh}{dr}$
$$\frac{dh}{dr}=-\frac{2rh}{r^2}=-\frac{2h}{r}.$$

代入第一个方程：
$$\frac{dc}{dr}=4\pi(2r-h)$$

所以，$2r=h$时，$\frac{dc}{dr}=0$

为了证明这个临界点是最小值，再次求导：

$\frac{d^2c}{dr^2}=4\pi(2-\frac{dh}{dr})=4\pi(2+\frac{2h}{r})$

#### 13.1.6 一个较难的最优化例子

### 13.2 线性化
现在我们开始用导数去估算特定的量。

#### 13.2.1 线性化问题：一般方法
估算$\sqrt{11}$，设函数$f(x)=\sqrt{x}$.选某个与$x$很接近的数$a，f(a)$容易计算，如$f(9)$。已知$f$和特殊值，找出$y=f(x)$上点$(a,f(a))$的切线，方程为：

$$y-f(a)=f'(a)(x-a)$$

设切线为$y=L(x)$
$$L(x)=f(a)+f'(a)(x-a)$$

这个线性函数$L$被称为$f$在$x=a$处的线性化。
我们把$L(x)$作为$f(x)$近似，有：
$$f(x)\approx L(x)=f(a)+f'(a)(x-a).$$

#### 13.2.2 微分
再来看一下刚才的一般方法，我们看到：
$$f(x) \approx f(a)+f'(a)(x-a)$$

定义$\Delta x=x-a,x=a+\Delta x,$
$$f(a+\Delta x)\approx f(a)+f'(a)\Delta x$$

$$df=f'(a)\Delta x$$

量$df$被称为$f$在$x=a$处的微分。它是对当从$x$从$a$变化为$a+\Delta x$时$f$的变化量的近似。

例如，估算$(6.01)^2$
设$f(x)=x^2$，且$a=6,f'(6)=12$.我们想要知道$x$从6起增加0.01时$f(x)$会发生什么变化，所以设$\Delta x=0.01$，于是有：

$$df=f'(a)\Delta x=f'(6)(0.01)=0.12$$

$$f(a)=f(6)=36,(6.01)^2 \approx 36.12$$

#### 13.2.3 线性化的总结和例子
- 1.写出主要公式：
  $$f(x)\approx L(x)=f(a)+f'(a)(x-a).$$
- 2.选择一个函数f以及一个数x，使得这个难搞定的数等于f(x)。另外，选取一个接近于x的a，并使得f(a)可以容易算得。
- 3.对f求导，找出f'(x).
- 4.在上述方框公式中，用实际的函数分别代替f和f'，用你选定的实际数值替代a.
- 5.最后，把第二步中的x值代入公式加以计算，另外注意到微分df等于量f'(a)(x-1)
注意：一切都取决于a 的值。
  
#### 13.2.4 近似中的误差

### 13.3 牛顿法
下面是线性化的另一个有用的应用。

假设现在要解一个形为$f(x)=0$的方程，但你无法求解。只好试着猜测该方程有一个解，并把它记为$a$。

从图中可以看出，$f(a)$实际上并不等于0，所以a并不是该方程的解，它仅仅是解的一个近似或估算，可以把它视为近似的第一次尝试（初始的近似）。

牛顿法的基本思想：通过使用$x=a$处的线性化来改善估算。（当然，这意味着f需要在$x=a$处是可导的。）

这个线性化的$x$轴截距记为$b$，并且显而易见，相对于真正的零点，它是个比$a$更好的近似。$b$就是线性化$L(x)=f(a)+f'(a)(x-a)$的$x$轴截距。$b=a-\frac{f(a)}{f'(a)}.$

**牛顿法**
- 牛顿法：假设$a$是对方程$f(x)=0$的解的一个近似，如果令$b=a-\frac{f(a)}{f'(a)}$,则在很多情况下，$b$是个比$a$更好的近似。

这并不是在所有情况下都成立，失效的四种情况：

- (1).$f'(a)$的值接近于0，显然如果$b=a-\frac{f(a)}{f'(a)}$,则$f'(a)$不能为0，否则$b$是没有定义的。在这种情况下，在$x=a$处的切线不可能与$x$轴相交，因为它是水平的！即使$f'(a)$很接近但不等于0，牛顿法仍会给出一个很糟糕的结果。
为了避免出现这种情况，要确保你的初始猜测不在函数f的临界点附近。
- (2).如果$f(X)=0$有不止一个解，可能得到的不是你想要的那个解。
所以你选取一个接近于你想要的那个零点的初始猜测a，除非你确定只有一个解。
- (3).近似可能会变得越来越糟。
  例子：$f(x)=x^{1/3}，f(x)=0$的唯一的解是$x=0$
- (4).你可能陷入一个循环而无法自拔。陷入一个循环时，不妨再选其他的初始猜测试试看。