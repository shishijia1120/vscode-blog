## 9 指数函数和对数函数
### 9.1 基础知识
#### 9.1.1 指数函数的回顾
取一个正数，称之为底数，并将它提升为其指数次方的一个幂：
$$
底数^{指数}.
$$

对于任意的底数$b>0$和实数$x$与$y$:
- $b^0=1.$
- $b^1=b.$
- $b^xb^y=b^{x+y}.$
- $\frac{b^x}{b^y}=b^{x-y}.$
- $(b^x)^y=b^{xy}.$
#### 9.1.2 对数函数的回顾
$\log_b(y)$是为了得到y你必须将底数b提升的幂次。这意味着，对于给定的b和y，$x=\log_b(y)$是方程$b^x=y$的解，将$x$的值代入，得到公式
$$b^{\log_b(y)}=y \quad(对于任意的y>0和b>0都成立).$$
#### 9.1.3 对数函数、指数函数及反函数
- 只要底数相同，对数的指数就是原始的数!
$$b^{\log_b(y)}=x,$$
- 指数的对数就是原始的数(前提是底数相同!)
$$\log_b(b^x)=x (对于任意的实数x及b>1).$$
#### 9.1.4 对数法则
前述9.1.1节中的所有指数法则都有相应的对数版本，它们(毫不奇怪地)被称为对数法则。实际上还有额外的一条对数法则——换底法则，它没有相应的指数法。因此，下面是对于任意的底数$b>1$和正的实数$x$与$y$有效的法则：
- $\log_b(1)=0.$
- $\log_b(b)=1.$
- $\log_b(xy)=\log_b(x)+\log_b(y).$
- $\log_b(x/y)=\log_b(x)-\log_b(y).$
- $\log_b(x^y)=y\log_b(x).$
- 换底法则：对于任意的底数$b>1$和$c>1$及任意的数$x>0$,
$$\log_b(x)=\frac{\log_b(x)}{\log_c(b)}$$
这意味着，所有的不同的底数的对数函数其实是互为常数倍的。确实，上述方程说明
$$\log_b(x)=K\log_c(x)$$
其中K是常数(它恰好等于$1/\log_c(b)$).
(学会证明上述法则)
### 9.2 e的定义
#### 9.2.1 一个有关复利的问题

#### 9.2.2 问题的答案
假设年利率r每年计n次复利。是否有财富增长极限？
$$L=\lim \limits_{n \rightarrow \infty}(1+\frac{r}{n})^n.$$

$$年利率为r，一年计n次复利，t年后的财富=A(1+\frac{r}{n})^{nt}.$$

计算极限
$$L=\lim \limits_{n \rightarrow \infty}(1+\frac{r}{n})^n.$$

首先，设$h=r/n$，那么当$n\rightarrow \infty$时，我们看到$h\rightarrow 0^+$(因为r是常数)，故
$$L=\lim \limits_{h \rightarrow 0^+}(1+h)^r/h.$$

现在可以适用指数法则将之写成
$$L=\lim \limits_{h \rightarrow 0^+}((1+h)^{1/h})^r=e^r.$$

这意味着，在年利率$r$、复利计算得越来越频繁的情况下，你的财富会增长到一个非常接近于$e^r$的量，但绝不会超过它。量$e^r$就是我们要找的"财富增长极限".得到这个增长倍数的唯一途径就是连续地复利。
$$以年利率r连续计复利，t年后的财富=Ae^{rt}.$$
#### 9.2.3 更多关于e和对数函数的内容
用1替换r，得到
$$L=\lim \limits_{n \rightarrow \infty}(1+\frac{1}{n})^r=e.$$

得到，$e=2.718281...$

底数为e的对数称为自然对数。其对数法则和公式，对于x>0和y>0：
- $e^{\ln(x)}=x$
- $\ln(e^x)=x$
- $\ln(1)=0$
- $\ln(e)=1$
- $\ln(xy)=\ln(x)+\ln(y)$
- $\ln(\frac{x}{y})=\ln(x)-\ln(y)$
- $\ln(x^y)=y\ln(x)$

事实上，在第二个公式中，x甚至可以是负数或0；在最后一个公式中，y可以是负数或0.
。。。

总结已发现的事实：
$\lim \limits_{n \rightarrow \infty}(1+\frac{x}{n})^n=e^x$和$\lim \limits_{h \rightarrow 0}(1+xh)^{1/h}=e^x.$

当$x=1$时，我们得到$e$的两个公式：
$\lim \limits_{n \rightarrow \infty}(1+\frac{1}{n})^n=e$和$\lim \limits_{h\rightarrow 0}(1+h)^{1/h}=e.$

这些公式非常重要!会使用其中之一来对对数求导.
### 9.3 对数函数和指数函数求导
$令g(x)=\log_b(x).g$的导数是什么呢？
$$g'(x)=\lim \limits_{h \rightarrow 0}\frac{g(x+h)-g(x)}{h}=\lim \limits_{h \rightarrow 0}\frac{\log_b(x+h)-\log_b(x)}{h}.$$

使用对数法则来简化公式：
$$g'(x)=\lim \limits_{h \rightarrow 0}\frac{1}{h}\log_b(\frac{x+h}{x}).$$

$$g'(x)=\lim \limits_{h \rightarrow 0}\log_b(1+\frac{h}{x})^{1/h}.$$

暂时忘记$\log_b.$当$h$趋于0时.
$$(1+\frac{h}{x})^{1/h}$$

会怎样呢？也就是说.
$$\lim \limits_{h \rightarrow 0}(1+\frac{h}{x})^{1/h}$$

上一节中，我们看到了
$$\lim \limits_{h \rightarrow 0}(1+hr)^{1/h}=e^r.$$

因此，如果用$1/x$替换r，就会有
$$g'(x)=\lim \limits_{h \rightarrow 0}(1+\frac{h}{x})^{1/h}=e^{1/x}.$$

所以如果回到$g'(x)$的表达式，我们会看到
$$g'(x)=\lim \limits_{h \rightarrow 0}\log_b(1+\frac{h}{x})^{1/h}=\log_b(e^{1/x}).$$

使用对数法则5将表达式进一步简化——将指数$1/x$提至对数符号之前，这样就证明了
$$\frac{d}{dx}\log_b(x)=\frac{1}{x}\log_b(e).$$

现在，设$b=e$，这样就能求以$e$为底的对数的导数了，得到
$$\frac{d}{dx}\log_b(x)=\frac{1}{x}\log_e(e)=\frac{1}{x}.$$

这就是为什么以$e$为底的对数被称为自然对数的原因之一。得到重要公式：
$$\frac{d}{dx}\ln(x)=\frac{1}{x}$$

此外，上面的$\log_b(x)$的导数表达式$\frac{1}{x}\log_b(e)$可以通过换底法则用自然对数写出；你看，通过将底换为e，得到
$$\log_b(e)=\frac{\log_e(e)}{\log_e(b)}=\frac{1}{\ln(b)}.$$

因此，有
$$\frac{d}{dx}\log_b(x)=\frac{1}{x\ln(b)}.$$

这是表达一个不是以e为底的对数的导数的最好方式了。现在再来看看这个：如果$y=b^x$，那么我们知道$x=\log_b(y)$.现在对其关于$y$求导.使用上述公式并用$y$替换$x$，得到
$$\frac{dx}{dy}=\frac{1}{y\ln(b)}.$$

根据链式求导法则，可以上下颠倒得到
$$\frac{dy}{dx}=y\ln(b).$$

由于$y=b^x$，我们就证明了下面这个很好的公式：
$$\frac{d}{dx}(b^x)=b^x\ln(b).$$

特别地
$$\frac{d}{dx}(e^x)=e^x.$$
### 9.4 求解指数函数或对数函数的极限

#### 9.4.1 涉及$e$的定义的极限

$$\lim \limits_{h \rightarrow 0}(1+h)^{1/h}=e.$$

当$h \rightarrow 0$时自身趋于0的量替换$h$，则极限仍是$e$。

当变量不匹配时：
$$\lim \limits_{h \rightarrow 0}(1-5h^3)^{2/h^3}$$

$\lim \limits_{h \rightarrow 0}(1-5h^3)^{2/h^3}=\lim \limits_{h \rightarrow 0}(1-5h^3)^{(1/(-5h^3))\times (-10)}.$
$\qquad \qquad \qquad \quad =\lim \limits_{h \rightarrow 0}((1-5h^3)^{1/(-5h^3))^{-10}}=e^{-10}.$

#### 9.4.2 指数函数在0附近的行为
$$\lim \limits_{x \rightarrow 0}e^x=e^0=1.$$

可以用任意的当$x\rightarrow 0$时自身趋于0的量来替换x，来得到相同的极限.

这种方法在指数项出现在一个乘积或商当中时最好用，但对于诸如
$$\lim \limits_{h \rightarrow 0}\frac{e^h-1}{h}$$

这样的形式就彻底无能无力了。试着设$f(x)=e^x,$这样$f'(x)=e^x$.在这种情况下，标准公式
$$\lim \limits_{h \rightarrow 0}\frac{f(x+h)-f(x)}{h}=f'(x)$$

变为
$$\lim \limits_{h \rightarrow 0}\frac{e^{x+h}-e^x}{h}=e^x.$$

现在，所需做的是只是用0替换$x$.由于$e^0=1,$我们得到以下有用的事实：
$$\lim \limits_{h \rightarrow 0}\frac{e^h-1}{h}=1.$$

再一次地，可以用任意的很小的量来替换$h$.标准的匹配技巧再次奏效。


#### 9.4.3 对数函数在1附近的行为
看看对数函数在1附近的行为会如何.事实表明，其行为和指数函数在0附近的行为十分相似，我们知道$\ln(1)=0,$但
$$\lim \limits_{h \rightarrow 0}\frac{\ln(1+h)}{h}$$

这其实是导数伪装的极限的另一个例子。
设$f(x)=\ln(x).f'(x)=\frac{1}{x}$现在等式
$$\lim \limits_{h \rightarrow 0}\frac{f(x+h)-f(x)}{h}=f'(x)$$

变为，对于任意的$x$，
$$\lim \limits_{h \rightarrow 0}\frac{\ln(x+h)-\ln(x)}{h}=\frac{1}{x}.$$

将$x=1$代入
$$\lim \limits_{h \rightarrow 0}\frac{\ln(1+h)-\ln(1)}{h}=\frac{1}{1}.$$

由于$\ln(1)=0$，上式简化为
$$\lim \limits_{h \rightarrow 0}\frac{\ln(1+h)}{h}=1.$$

再一次地，可以用任意的当$h \rightarrow 0$时自身趋于0的量来替换$h$，而极限仍将是1.
例如，为了求：
$$\lim \limits_{h \rightarrow 0}\frac{\ln(1-7h^2)}{5h^2}=\lim \limits_{h \rightarrow 0}\frac{\ln(1-7h^2)}{-7h^2}\times \frac{-7h^2}{5h^2}.$$

这不过是我们那个常用的技巧，分子分母同时乘以一个有用的量(在该例中是$-7h^2$).
#### 9.4.4 指数函数在$\infty$或$-\infty$附近的行为

$\qquad \qquad \qquad \qquad \lim \limits_{x \rightarrow  \infty}e^x=\infty \quad $和$\quad \lim \limits_{x \rightarrow  -\infty}e^x=0.$

如果用某个其他的底数替换$e$会怎样呢?例如，考虑：
$\qquad \qquad \qquad \qquad \lim \limits_{x \rightarrow  \infty}2^x\quad$和$\quad \lim \limits_{x \rightarrow  \infty}(\frac{1}{3})^x. $

为了处理第一个极限，需要使用等式$A=e^{\ln(A)}.$其中$A=2^x.$写出
$$2^x=e^{\ln(2^x)}=e^{x\ln(2)}.$$

当$x\rightarrow \infty$时，$x\ln(2)\rightarrow \infty$,故第一个极限是$\infty$.至于第二个极限，可以使用相同的技巧，写出
$$(\frac{1}{3})^x=\frac{1}{3^x}=\frac{1}{e^{x\ln(3)}}.$$

当$x\rightarrow \infty$时，我们看到$e^{x\ln(3)}\rightarrow \infty$，故其倒数趋于0.这样，就证明了
$\lim \limits_{x \rightarrow  \infty}2^x=\infty$和$\lim \limits_{x \rightarrow  \infty}(\frac{1}{3})^x=0.$

可见下面这个重要极限要分几种情况：
$$\lim \limits_{x \rightarrow  \infty}r^x=\begin{cases}
    \infty \qquad 如果r>1, \\
    1 \qquad  如果r=1, \\
    0 \qquad 如果0 \leq r <1. \\
\end{cases}$$

##### 指数函数增长迅速：不管n有多大，
$$\lim \limits_{x \rightarrow  \infty}\frac{x^n}{e^x}=0.$$

更一般的陈述：
$$\lim \limits_{x \rightarrow  \infty}\frac{多项式型}{指数为大的、正的多项式型的指数函数}=0.$$

#### 9.4.5 对数函数在$\infty$附近的行为
$$\lim \limits_{x \rightarrow  \infty}\ln(x)=\infty.$$

**对数函数增长缓慢：** 不管$a$有多小.如果$a>0,\lim \limits_{x \rightarrow  \infty}\frac{\ln(x)}{x^a}=0.$

更一般的形式：
$$\lim \limits_{x \rightarrow  \infty}\frac{任何正的多项式型的对数函数}{具有正的幂次的多项式型}=0.$$

例如：
$$\lim \limits_{x \rightarrow  \infty}\frac{\log_7(x^3+3x-1)}{x^{0.1}-99}=0.$$

尽管$x^{0.1}$非常小.

#### 9.4.6 对数函数在0附近的行为
因为$\ln(0)$无定义，
$$\lim \limits_{x \rightarrow  0^+}\ln(x)=-\infty.$$

当用一个很大的数和一个很小的数相乘时，会发生什么情况？

$$\lim \limits_{x \rightarrow  0^+}x\ln(x)=\lim \limits_{t \rightarrow  \infty}\frac{1}{t}\ln(\frac{1}{t)}=\lim \limits_{t \rightarrow  \infty}\frac{-\ln(t)}{t}=0.$$
由于对数函数增长缓慢，故极限为0.

用$1/t$替换x这一技巧可以将对数函数在0附近的行为转换为在$\infty$附近的行为，因为$\ln(1/t)=-\ln(t).$

**对数函数在0附近"增长"缓慢：** 不管$a$有多小，如果$a>0,\lim \limits_{x \rightarrow  0^+}x^a \ln(x)=0.$

### 9.5 取对数求导法
处理像$f(x)^{g(x)}$这样底数和指数均为x的函数的导数问题时，取对数求导法是一个有用的技巧。

假设要关于$x$求导数
$$y=f(x)^{g(x)},$$

其中底数$f$和指数$g$都含有变量$x$.以下是你需要做的：
- (1) 设$y$是想要求导的$x$的函数.对等号两边取(自然)对数.右边的指数$g$得以移下来，这样得到
$$\ln(y)=g(x)\ln(f(x)).$$
- (2) 对等号两边关于$x$做隐函数求导，右边常常会用到乘积法则和(至少)链式求导法则.左边的结果则总是($1/y(dy/dx)$).因此，你会得到
$$\frac{1}{y}\frac{dy}{dx}=关于x的一堆东西$$
- (3) 用$y$和等式两边相乘会得到单独的$dy/dx$这一项，然后用原始的表达式$f(x)^{g(x)}$替换$y$，你就完成了求解.

举例
$$\frac{d}{dx}(x^{\sin(x)})$$

$$\ln(y)=\ln(x^{\sin(x)})=\sin(x)\ln(x).$$

现在，对等号两边关于$x$左隐函数求导：
$$\frac{d}{dx}(\ln(y))=\frac{d}{dx}(\sin(x)\ln(x)).$$

$设u=\ln(y),\frac{du}{dy}=\frac{1}{y}.$
$$\frac{du}{dx}=\frac{du}{dy}\frac{dy}{dx}=\frac{1}{y}\frac{dy}{dx}.$$

因此，隐函数求导后得到
$$\frac{1}{y}\frac{dy}{dx}=\cos(x)\ln(x)+\frac{\sin(x)}{x}.$$

所以
$$\frac{dy}{dx}=(\cos(x)\ln(x)+\frac{\sin(x)}{x})y=(\cos(x)\ln(x)+\frac{\sin(x)}{x})x^{\sin(x)}.$$

- 还可以用另外一种方法来解题，不是使用变量$y$，直接使用公式$A=e^{\ln(A)}$来写出
$$x^{\sin(x)}=e^{\ln(x^{\sin(x)})}=e^{\sin(x)\ln(x)}.$$

即便底数和指数都不是$x$的函数，取对数求导法仍会非常有用，如果你的函数非常复杂并涉及很多幂函数(像$x^2$)和指数函数(像$e^x$)的乘积和商，那么取对数求导法就可能会帮得上忙.例如
$$y=\frac{(x^2-3)^{100}3^{\sec(x)}}{2x^5(\log_7(x)+\cot(x))}.$$

$\ln(y)=\ln(\frac{(x^2-3)^{100}3^{\sec(x)}}{2x^5(\log_7(x)+\cot(x))})$

$=\ln((x^2-3)^{100})+\ln(3^{\sec(x)})-\ln(2)-\ln(x^5)-\ln((\log_7(x)+\cot(x))^9)$

$=100\ln(x^2-3)+\sec(x)\ln(3)-\ln(2)-5\ln(x)-9\ln(\log_7(x)+\cot(x)).$

...