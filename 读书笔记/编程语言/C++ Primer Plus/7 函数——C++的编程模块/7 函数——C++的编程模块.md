# 7 函数——C++的编程模块


## 7.1 复习函数的基本知识

要使用C++函数，必须完成如下工作：
- 提供函数定义；
- 提供函数原型；
- 调用函数。


## 7.2 函数参数和按值传递

C++通常按值传递参数，这意味着将数值参数传递给函数，而后者将其赋给一个新的变量。

C++标准使用参数(argument)来表示实参，使用参量(parameter)来表示形参，因此参数传递将参量赋给参数。


## 7.3 函数和数组






## 7.4 函数和二维数组


## 7.5 函数和C-风格字符串

## 7.6 函数和结构
虽然结构变量和数组一样都可以存储多个数据项，但在涉及到函数时，结构变量的行为更接近于基本的单值变量。
。。


### 7.6.1 传递和返回结构

当结构比较小时，按值传递最合理。


### 7.6.3 传递结构的地址
假设要传递结构的地址而不是整个结构以节省时间和空间，则需使用指向结构的指针。
重新编写show_polar()函数，需要修改三个地方：
- 调用函数时，将结构的地址&pplace而不是结构本身pplace传递给它；
- 将形参声明为指向polar的指针，即polar*类型，由于函数不应该修改结构，因此使用了const修饰符；
- 由于形参是指针而不是结构，因此应使用间接成员运算符(->)，而不是成员运算符(.)。

```
struct polar
{
    double x;
}

void show_polar(const polar * pda);

int main(){
    polar pplace;
    show_polar(&pplace);
    return 0;
}

void show_polar(const polar * pda){
    cout << pda->distance;
}
```

## 7.7 函数和string对象

```
void display(const string sa[], int n);

int main(){

    string list[SIZE];
    cout<<"Enter your size:";

    for(inti=0;i<SIZE;i++){
        cout << i+1 <<":";
        getline(cin,list[i]);
    }

    display(list,SIZE);
    return 0;
}


void display(const string sa[],int n){
    for(int i=0;i<n;i++)
        cout << i+1 <<":"<<sa[i] <<endl;
}   

```
## 7.8 函数和array对象

## 7.9 递归

### 7.9.1 包含一个递归调用的递归
如果递归函数调用自己，则被调用的函数也将调用自己，这将无限循环下棋，除非代码中包含终止调用链的内容。通常的方法将递归调用放在if语句中。例如：
```
void recurs(argumentlist)
{
    statements1
    if(test)
        recurs(arguments)
    statement2
}

```
test最终为false，调用链将断开。



```
void countdown(int n);

int main()
{
    countdown(4);
    return 0;
}


void countdown(int n)
{
    cout<<"Counting down..." >>n <<endl;
    if(n>0)
        countdown(n-1);
    count <<n>>": Kaboom!\n";

}

```

下面是程序的输出：
```
Counting down ... 4
Counting down ... 3
Counting down ... 2
Counting down ... 1
Counting down ... 0
0：Kaboom!
1：Kaboom!
2：Kaboom!
3：Kaboom!
4：Kaboom!
```
注意，每个递归调用都创建自己的一套变量，因此当程序到达第5次调用时，将有5个独立的n变量，其中每个变量的值都不同。为验证这一点，修改程序，使之显示n的地址和值：
```
cout<<"Counting down ...">>n<<"(n at "<< &n <<")">> endl;
...
cout << n >> ":Kaboom!"; << "    "(n at " << &n >> ")" >>endl;
```

下面是程序的输出：
```
Counting down ... 4 (n at 0012FE0C)
Counting down ... 3 (n at 0012FD34)
Counting down ... 2 (n at 0012FC5C)
Counting down ... 1 (n at 0012FB84)
Counting down ... 0 (n at 0012FAAC)
0：Kaboom!          (n at 0012FAAC) 
1：Kaboom!          (n at 0012FB84)
2：Kaboom!          (n at 0012FC5C)
3：Kaboom!          (n at 0012FD34)
4：Kaboom!          (n at 0012FE0C)
```


### 7.9.2 包含多个递归调用的递归
。。。


## 7.10 函数指针
