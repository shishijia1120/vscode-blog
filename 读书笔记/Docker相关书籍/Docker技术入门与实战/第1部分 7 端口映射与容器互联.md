## 7 端口映射与容器互联
前面学习了单个容器的管理操作。在实践中，经常会碰到需要多个服务器组件容器共同协作的情况，往往需要多个容器之间有能够互相访问到对方的服务。

除了通过网络访问外，Docker还提供了两个很方便的功能来满足服务访问的基本需求：一个是允许映射容器内应用的服务端口到本地宿主主机；
另一个是互联机制实现多个容器间通过容器名来快速访问。

### 7.1 端口映射实现访问容器

1. 从外部访问容器应用
    在启动容器的时候，如果不指定对应的参数，在容器外部是无法通过网络来访问容器内的网络应用和服务的。

    当容器中运行一些网络应用，要让外部访问这些应用时，可以通过-P或-p参数来指定端口映射。当使用-P标记时，Docker会随机映射一个49000~49900的端口到内部容器开放的网络端口：
    ```$ docker run -d -p training/webapp python app.py```
    ```$ docker ps -l```
    此时，可以使用docker ps看到，本地主机的49155被映射到了容器的5000端口。访问宿主主机的49155端口即可访问容器内Web应用提供的界面。


2. 映射所有接口地址
    使用HostPort:ContainerPort格式将本地的5000端口映射到容器的5000端口，可以执行：
    ```$ docker run -d -p 5000:5000 training/webapp python app.py```

    此时默认会绑定本地所有接口上的所有地址。多次使用-p标记可以绑定多个端口。例如：
    ```$ docker run -d -p 5000:5000 -p 3000:80 training/webapp python app.py```
3. 映射到指定地址的指定端口
    ```$ docker run -d -p 127.0.0.1:5000:5000 training/webapp python app.py```

4. 映射到指定地址的任意端口
    ```$ docker run -d -p 127.0.0.1::5000 training/webapp python app.py```
5. 查看映射端口配置
    使用docker port命令来查看当前映射的端口配置，也可以查看到绑定的地址：
    ```$ docker port nostalgic_morse 5000```

### 7.2 互联机制实现便捷互访


### 7.3 本章小结