## 2 核心概念与安装配置

### 2.1 核心概念

1. Docker镜像


2. Docker容器
3. Docker仓库

### 2.2 安装Docker
Docker官网的Get Docker(https://www/docker.com/products/overview)

推荐尽量使用Linux操作系统来运行Docker，因为目前Linux操作系统对Docker的支持是原生的，使用体验最好。

#### 2.2.1 Ubuntu环境下安装Docker

1. 系统要求
Docker目前只能运行在64位平台上，并且要求内核版本不低于3.10，实际上内核越新越好，并且要求内核版本不低于3.10，越新越好。
用户可以通过"unama -a" 或"cat /proc/version"

2. 添加镜像源
首先需要安装apt-transport-https包支持HTTPS协议的源:
```$ sudo apt-get install -y apt-transport-https```

添加源的gpg密钥:
```$ sudo apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80..........```

获取当前操作系统的代号:
```$ lsb_release -c```
```Codename:trusty```

添加Docker的官方apt软件源，创建/etc/apt/sources.list.d/docker.list文件，写入源的地址内容：
```$ sudo cat <<EOF>> /etc/apt/sources.list.d/docker.list```
```deb https://apt.dockerproject.org/repo ubuntu-trusty main```
```EOF```

3. 开始安装Docker
在成功添加源之后，就可以安装最新版本的Docker了，软件包名称为docker-engine:
```$ sudo apt-get install -y docker-engine```

如果系统中存在较旧版本的Docker，会提示是否先删除，选择是即可。

除了基于手动添加软件源的方式，也可以使用官方提供的脚本来自动化安装Docker:
```$ sudo curl -sSL https://get.docker.com/ | sh```

安装成功后，启动docker服务：
```$ sudo service docker start```


#### 2.2.2 CentOS环境下安装Docker
1. 系统的要求与Ubuntu情况下类似：64位操作系统，内核版本至少为3.10。

Docker目前支持CentOS 6.5及以后的版本，推荐使用CentOS 7系统。

2. 添加yum软件源：

```$ sudo tee /etc/yum.repos.d/docker.repo <<-'EOF'```

3. 更新yum软件源缓存，安装Docker:
```$ sudo yum update```
```$ sudo yum install -y docker-engine```
对于CentOS 7系统，CentOS-Extras源中已内置Docker，如果已经配置CentOS-Extras源，可以直接通过上面的yum命令进行安装。



#### 2.2.3 通过脚本安装
用户还可以通过使用官方提供的shell脚本来在Linux系统(目前支持Ubuntu、Debian、CentOS等)上安装Docker的最新正式版本，该脚本会自动检测系统信息并进行相应配置：
```$ curl -fsSL https://get.docker.com/ | sh```

或者：
```$ wget -qO- https://get.docker.com/ | sh```



#### 2.2.4 Mac OS环境下安装Docker
#### 2.2.5 Windows环境下安装Docker


### 2.3 配置Docker服务
为了避免每次使用docker命令都要用特权身份，可以将当前用户加入安装中自动创建的docker用户组：
```$ sudo usermod -aG docker USER_NAME```

用户更新组信息后，退出并重新登录后即可生效。

另外，Docker服务支持多种启动参数，以Ubuntu14.04系统为例，Docker服务的默认配置文件为/etc/default/docker，可以通过修改其中的DOCKER+OPTS来修改服务启动的参数，例如，下一行代码让Docker服务可以通过本地2375端口接收来自外部的请求：
```DCOKER_opts="$docker_opts -H tcp://0.0.0.0:2375 -H unix://var/run/docker.sock"```

修改之后，通过service命令来重启Docker服务：
```$ sudo service docker restart```

另外，对于CentOS、Redhat等系统，服务可能是通过systemd来管理，与此略有不同。例如，需要通过systemctl命令来管理Docker服务：
```$ sudo systemctl start docker.service```



### 2.4 推荐实践环境
