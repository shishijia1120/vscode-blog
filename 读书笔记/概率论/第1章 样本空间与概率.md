## 第1章 样本空间与概率
### 1.1 集合
$$设S是一个集合，x是S的元素，我们将元素和集合的这种关系写成x\in S。若x不是S的元素，就写成x\notin S。一个集合可以没有$$

$元素，这个特殊的集合就称为空集。$
$$我们可以以x具有某种性质P为条件来刻画一个集合，记作：$$

$$\{x \vert x 满足性质P\}.$$
$$若集合S的所有元素均为集合T的元素，就称S为T的子集，记住S\subset T 或T \supset S。若S\subset T 且T \supset S，则两个集合相等，$$

$记作S=T。$

$$引入空间的概念是十分必要的，将我们感兴趣的所有元素放在一起，形成一个集合，这个集合称为空间，记作\Omega。当\Omega确定以后，$$

$我们所讨论的集合S都是\Omega的子集。$

#### 1.1.1 集合运算
$$集合\{x \in \Omega \vert x \notin S\}称为集合S相当与\Omega的补集，记住S^c，注意\Omega^c=\varnothing.$$

$$由属于S或属于T的元素组成的集合称为S和T的并，记为S\cup T.既属于S又属于T的元素组成的集合称为S和T的交，记为S\cap T.$$

$这些集合可用于下列公式表达：$

$$S_1 \cup S_2 \cdots=\{x|x\in S_n，对某个n成立 \}，$$

$$S_1 \cap S_2 \cdots=\{x|x\in S_n，对一切n成立 \}，$$

----
$$两个集合称为不相交的，如果它们的交集为空集。更一般地，几个集合称为互不相交的，如果任何两个集合没有公共元素，$$ 

$一组集合称为集合S的分割，如果这组集合中的集合互不相交，并且它们的并为S。$

$$设x和y为两个研究对象，我们用(x,y)表示x和y的有序对。我们用R表示实数集合，用R^2表示实数对的集合，即二维平面，$$ 

$用R^3表示三维实数向量的集合(三维空间)。集合及其运算可用维恩图形象化表示。$


#### 1.1.2 集合的代数

$$集合运算具有若干性质，这些运算性质可由运算的定义直接证得，举例如下：$$

$$S \cup T =T \cup S, \qquad \qquad \qquad \qquad \qquad S \cup(T \cup U)=(S\cup T)=(S \cup T)\cup U,$$

$$S \cap(T\cup U)=(S\cap T)\cup (S \cap U), \qquad S \cup(T\cap U)(S\cup T)\cap (S \cup U),$$


**德摩根定律**

### 1.2 概率模型
$概率模型是对不确定现象的数学描述。$

----
**概率模型的基本构成**
$样本空间\Omega，这是一个试验的所有可能结果的集合。$

$$概率律，概率律为试验结果的集合A(称为事件)确定一个非负数P(A)(称为事件A的概率)。而这个非负数刻画了我们对事件A的$$ 

$认识或所产生的信念的程度。$


#### 1.2.1 样本空间和事件


#### 1.2.2 选择适当的样本空间
#### 1.2.3 序贯模型



#### 1.2.4 概率律
>假定我们已经确定了样本空间\Omega以及与之联系的试验，为了建立一个概率模型，下一步就是要引进概率律的概念。直观上，它确定了任何结果或者任何结果的集合(称为事件)的似然程度。更精确一点说，它给每一个事件A，确定一个数P(A)，称为事件A的概率，它满足下面的几条公理。
----
**概率公理**

$(1) (非负性)对一切事件A，满足P(A) \geqslant 0 .$

$(2)(可加性)设A和B为；两个互不相交的集合(概率论中称为互不相容的事件)，则它们的并满足$

$$P(A \cup B)=P(A)+P(B).$$

$(3)(归一化)整个样本空间\Omega (称为必然事件)的概率为1，即P(\Omega)=1.$

----
$$为了将概率律形象化，可以将样本空间的试验结果看成质点，每一个质点有一个质量.P(A)就是这个质点集合的总质量，$$ 

$而全空间的总质量为1.这样，概率律的可加性公理就变得很直观了：不相交的事件序列的总质量等于各个事件的质量之和。$


$$概率律有许多重要的性质并没有包含到上述公理系统中，原因很简单，它们可以从公理系统中推导出来。例如，由可加性$$ 

$和归一化公理可得到1=P(\Omega)=P(\Omega \cup \varnothing)=P(\Omega)+P(\varnothing)=1+P(\Omega),$

$$P(\varnothing)=0.$$

$$现在推导另一个性质，令A_1、A_2和A_3为互不相容的事件，重复利用可加公理，可得到：$$

$$P(A_1 \cup A_2 \cup A_3)=P(A_1 \cup (A_2 \cup A_3))
$$

$$\quad \qquad \qquad \qquad \quad=P(A_1)+P(A_2 \cup A_3)$$

$$\quad \qquad \qquad \qquad \qquad \quad=P(A_1)+P(A_2)+P(A_3)$$


#### 1.2.5 离散模型


**离散概率律**
$$设样本空间由有限个可能的结果组成，则事件的概率可由组成这个事件的试验结果的概率所决定。事件{s_1,s_2,\cdots,s_n}的概率$$ 

$是P(s_i)之和，即$


$$P({s_1,s_2,\cdots,s_n})=P(s_1)+P(s_2)+\cdots +P(s_n).$$


**离散均匀概率律(古典概型)**
$$设样本空间由n个等可能性的试验结果组成，因此每个试验结果组成的事件(称为基本事件)的概率是相等的，由此得到：$$

$$P(A)=\frac{含于事件A的试验结果数}{n}.$$

#### 1.2.6 连续模型


#### 1.2.7 概率律的性质
#### 1.2.8 模型和现实



### 1.3 条件概率
$条件概率是在给定部分信息的基础上对试验结果一种推断。求出在给定B发生之下事件A的条件概率，记作P(A|B).$

$这个新的条件概率必须是合格的概率律，即满足三条概率公理。$

**条件概率定义：**
$$P(A|B)=\frac{P(A \cap B)}{P(B)}$$

#### 1.3.1 条件概率是一个概率律
$条件概率需满足三条概率公理：$

$1. 非负性是明显的；$

$2. 归一化也是满足的； $

$3. 证明可加性：$

$$P(A_1 \cup A_2|B)=\frac{P((A_1 \cup A_2)\cap B)}{P(B)}$$

$$=\frac{P((A_1 \cap B)\cup (A_2 \cap B)}{P(B)}$$

$$=\frac{P(A_1 \cap B)+P(A_2 \cap B)}{P(B)}$$

$$=\frac{P(A_1 \cap B)}{P(B)}+\frac{P(A_2 \cap B)}{P(B)}$$

$$=P(A_1|B)+P(A_2|B),$$
$此处第三个等式利用了事件A_1 \cap B和A_2 \cap B的不相容性和无条件概率的可加性。可数个互不相容事件的可加性的验证是类似的。$

----
**条件概率的性质**
- $$设事件B满足P(B)>0，则给定B之下，事件A的条件概率由下式给出：$$

$$P(A|B)=\frac{P(A \cap B)}{P(B)}.$$
$$这个条件概率在同一个样本空间\Omega 上给出了一个新的(条件)概率律。凡是现有的概率律的所有性质对这个条件概率都是适用的。$$

- $$由于条件概率所关心的事件都是事件B的子事件，可以把条件概率看成B上的概率律，即把事件B看成全空间或必然事件。$$

----
#### 1.3.2 利用条件概率定义概率模型
$$在为实验建立具有序贯特征的概率模型的时候，通常很自然地首先确定条件概率，然后确定无条件概率。在这个过程中，$$ 

$经常使用的是条件概率公式P(A \cap B)=P(B)P(A|B).$

----
**乘法规则**
$$假定所有涉及的条件概率都是正的，我们有P(\cap_{i=1} ^n A_i)=P(A_1)P(A_2|A_1)P(A_3|A_1 \cap A_2)\cdots P(A_n|\cap_{i=1}^{n=1}A_i).$$
**证明乘法规则**
$$P(\cap_{i=1} ^n A_i)=P(A_1)\frac{P(A_2 \cap A_1)}{P(A_1)} \cdot \frac{P(A_3 \cap A_1 \cap A_2)}{P(A_1 \cap A_2)} \cdots \frac{P(\cap_{i=1} ^n A_i)}{P(\cap_{i=1} ^{n-1}A_i)}.$$
$再利用条件概率的定义，上述右端变成：$
$$P(A_1)P(A_2|A_1)P(A_3|A_1 \cap A_2)\cdots P(A_n|\cap_{i=1}^{n-1}A_i).$$

----

### 1.4 全概率定理和贝叶斯准则
**全概率定理**
$$设A_1,A_2,\cdots,A_n是一组互不相容的事件，形成样本空间的一个分割(每一个试验结果必定使得其中一个事件发生)。$$ 

$又假定对每一个i，P(A_i)>0,则对于任何事件B，下列公式成立：$

$$P(B)=P(A_1 \cap B)+\cdots+P(A_n \cap B)$$

$$=P(A_1)P(B|A_1)+\cdots +P(A_n)P(B|A_n).$$

$$这条定理的一个主要应用是计算事件B的概率，直接计算事件B的概率有点难度，但是若条件概率P(B|A_i)是已知的或是$$ 

$很容易推导计算时，全概率定理就成为计算P(B)的有力工具。应用这条定理的关键是找到合适的分割A_1,\cdots,A_n，而$
$合适的分割又与问题的实际背景有关。$

----
$事件B可以分解成不相交的n个事件的并，即$
$$B=(A_1\cap B) \cup \cdots \cup (A_n \cap B).$$

$利用可加公理，得到：$
$$P(B)=P(A_1)P(B|A_1)+\cdots +P(A_n)P(B|A_n).$$

$将上式代入前一式中得到：$
$$P(B)=P(A_1)P(B|A_1)+\cdots +P(A_n)P(B|A_n).$$

----
**推理和贝叶斯准则**
$$全概率定理是与著名的贝叶斯准则联系在一起的。贝叶斯准则将形如P(A|B)的条件概率与形如P(B|A)的条件概率联系起来。$$



---

**贝叶斯准则**
$$设A_1,A_2,\cdots,A_n是一组互不相容的事件，形成样本空间的一个分割(每一个试验结果必定使得其中一个事件发生)。$$

$又假定对每一个i，P(A_i)>0。则对于任何事件B，只要它满足P(B)>0，下列公式成立：$

$$P(A_i|B)=\frac{P(A_i)P(B|A_i)}{P(B)}$$

$$=\frac{P(A_i)P(B|A_i)}{P(A_1)P(B|A_1)+\cdots +P(A_n)P(B|A_n)}.$$

----
$$贝叶斯准则还可以用来进行因果推理，有许多原因可以造成某一结果。现在设我们观察到某一结果，$$

$希望推断造成这个结果出现的原因。$

$$现在设事件A_1,\cdots,A_n是原因，而B代表原因引起的结果。P(B|A_i)表示在因果模型中由原因A_i造成结果B出现的概率。$$

$$当观察到结果B的时候，我们希望反推结果B是由原因A_i造成的概率P(A_i|B),P(A_i|B)为由于代表新近得到的信息B之后A_i$$

$出现的概率，称之为后验概率，而原来的P(A_i)就称为先验概率。$



### 1.5 独立性
$若$
$$P(A|B)=P(A)，$$

$$我们称事件A是独立于事件B的。注意，由条件概率的定义可知P(A|B)=P(A\cap B)/P(B)，上式等价于$$

$$P(A\cap B)=P(A)P(B).$$

$我们将后者作为事件A和事件B相互独立的正式定义，$


#### 1.5.1 条件独立
$在给定C之下，若事件A和事件B满足：$
$$P(A \cap B|C)=P(A|C)P(B|C),$$

$则称A和B在给定C之下条件独立。$

----

$为了导出条件独立的另一个特征，利用条件概率的定义和乘法规则，得到$

$$P(A\cap B|C)=\frac{P(A \cap B \cap C)}{P(C)}$$

$$=\frac{P(C)P(B|C)P(A|B \cap C)}{P(C)}$$

$$=P(B|C)P(A|B \cap C).$$

$只要P(B|C) \neq 0，那么可得到：$

$$P(A|B\cap C)=P(A |C),$$

$$这是条件独立的另一个等价定义(要求P(B|C) \neq 0).这个等式说明在给定C发生的条件之下，进一步假定B也发生，$$

$并不影响事件A的条件概率。$

$有意思的是，A和B两个事件相互独立并不包含条件独立，反过来也是如此。$

**P46的例题比较重要**


----
**独立性**
- $两个事件A和B称为相互独立的，如果它们满足$
$$P(A\cap B)=P(A)P(B).$$

$\qquad 若B还满足P(B)>0，则独立性等价于$
$$P(A|B)=P(A).$$

- $若A与B相互独立，则A与B^c也相互独立。$

$\qquad 设事件C满足P(C)>0，两个事件A和B称为在给定C的条件下条件独立，如果它们满足$

$$P(A\cap B|C)=P(A|C)P(B|C).$$

$$\qquad 若进一步假定P(B\cap C)>0，则A和B在给定C的条件下的条件独立性与下面的条件是等价的$$

$$P(A|B\cap C)=P(A|C).$$

- $独立性并不蕴含条件独立性，反之亦然。$


#### 1.5.2 一组事件的独立性
**几个事件的相互独立性的定义**
$$设A_1,\cdots ,A_n为n个事件，若它们满足P(\cap_{i \in S}A_i)=\prod P(A_i)对{1,2,\cdots,n}的任意子集S成立，则称A_1,\cdots,A_n为相互独立的事件。$$

----
$$关于事件A_1,A_2,A_3,独立性条件归结为下列4个条件：$$

$$P(A_1 \cap A_2)=P(A_1)P(A_2),$$

$$P(A_1 \cap A_3)=P(A_1)P(A_3),$$

$$P(A_2 \cap A_3)=P(A_2)P(A_3),$$

$$P(A_1 \cap A_2 \cap A_3)=P(A_1)P(A_2)P(A_3).$$

$$前面3个等式说明任意两个事件是相互独立的，这种性质称为两两独立。但是第4个条件也非常重要，$$

$它并不是前面3个等式的推论。$

$反过来，第4个条件也不包含前3个条件。$


----
**注意**

$1. 两两独立并不包含独立$

$2. P(A_1 \cap A_2 \cap A_3)=P(A_1)P(A_2)P(A_3)不包含独立$

----

#### 1.5.3 可靠性





#### 1.5.4 独立试验和二项概率
$$现在设试验由一系列独立并且相同的小试验组成，称这种试验为独立试验序列。当每个阶段的小试验只有两种可能结果的时候，$$

$就称为独立的伯努利试验序列，此处的两种可能结果可以是任何结果。$

$$在长度为n的独立伯努利试验序列中，任何具有k个正面和n-k个反面的试验结果的概率为p^k(1-p)^{n-k}，$$

$其中k的取值可以从0变到n.$$

$$p(k)=P(n次抛掷中有k次出现正面)=\begin{pmatrix}
    n \\k
\end{pmatrix}p^k(1-p)^k,$$

$$此处记号：\begin{pmatrix}
    n \\k
\end{pmatrix}=n次抛掷硬币的试验中出现k次正面的试验结果数.$$

$数\begin{pmatrix}
    n \\k
\end{pmatrix}就是有名的二项式系数，称为n选k的组合数，概率p(k)就是有名的二项概率。$

$$\begin{pmatrix}
    n \\k
\end{pmatrix}=\frac{n!}{k!(n-k)!},k=0,1,\cdots, n,$$

**二项式公式**
$$\sum_{k=0}^n\begin{pmatrix}
    n \\k
\end{pmatrix}p^k(1-p)^{n-k}=1.$$



### 1.6 计数法
$在计算概率时，通常需要数清楚有关事件中的试验结果数(或基本事件数)。已经遇到的两种情况，需要这样的计数法：$

$$1. 当样本空间\Omega 只有有限个等可能的试验结果，因此这是一个等概率模型。事件A的概率可由下式给出;$$

$$P(A)=\frac{A中元素的数目}{\Omega中元素的数目},$$

$$2. 当我们需要计算事件A的概率，且A中的每一个试验结果具有相同的概率p(p已知)时，那么$$

$$P(A)=p\cdot (A中元素的数目).$$


$计数问题原则上很简单，但是真正计算起来却不简单。计数的艺术属于组合数学的一部分。$

----
#### 1.6.1 计数准则


**计数准则**：
$考虑由r个阶段组成的一个试验，假设：$

$1. 在第1阶段有n_1个可能的结果；$

$2. 对于第1阶段的任何一个结果，在第2个阶段有n_2个可能的结果；$

$$3. 一般地，在前r-1个阶段的任何一个结果，在接下来的第r阶段有n_r个结果，则在r个阶段的试验中一共有$$

$$n_1n_2\cdots n_r$$

----
#### 1.6.2 n选k排列
$$首先假定n个不同的对象组成一个集合，令k是一个正整数，.现在我们希望找出从n个对象中顺序地选出k个对象的方法数，$$

$$或从k个不同对象的序列数。作为第一阶段，我们可以从n个对象中任意选一个。当一个对象选定以后，在第二阶段，$$

$$我们只可能从剩下的n-1个对象中选择一个，当前两个对象选定以后，在第三阶段，只可能从剩下的n-2个对象中选择一个，$$

$等等。最后当我们选择第k个对象的时候，$

$$只能从剩下的n-(k-1)个对象中选择了。利用计数准则，所有可能的序列数为：$$

$$n(n-1)\cdots(n-k+1)=\frac{n(n-1)\cdots(n-k+1)(n-k)\cdots2\cdot 1}{(n-k)\cdots 2 \cdot 1}$$

$$=\frac{n!}{(n-k)!}$$

$$这些序列称为n取k排列，特别当k=n的时候，简称为排列，此时所有可能的序列数为n(n-1)\cdots 2 \cdot 1=n!$$

----
#### 1.6.3 组合
>给定的n个元素的集合中有多少种不同的k个元素的子集？注意，形成k子集不同于形成n选k排列，因为在选择子集的过程中，选出来的k个元素之间是没有次序的。

$$在n个对象抽取k个对象的组合中，每一个组合对应了k!个不同的排列。这样n个对象取k个对象的排列数$$

$$n!/(n-k)!等于组合数乘以k!。因此，从n个元素的集合中选k个元素的组合数为:$$

$$\frac{n!}{k!(n-k)!}$$

----

#### 1.6.4 分割
>注意到组合是从n元素集合中选出的一个元素个数为k的子集，因此可将一个组合看成将集合分成两个子集合的一个分划，其中一个子集的元素个数为k，另一个子集为补集，其元素的个数为n-k。如果将一个集合分成多于两个集合的分割。

$$给定一个元素个数为n的集合，并设n_1，n_2，\cdots ,n_r为非负整数，其总和为n。$$

$$现在考虑将具有n个元素的集合分解成r个不相交的子集，使得第i个子集元素个数刚好是n_i，问一共有多少种分解的方法。$$

$$现在分阶段每次确定一个子集，一共有\begin{pmatrix}
    n \\n_1
\end{pmatrix}种方法确定第一个子集。当第一个子集确定以后，$$

$$只剩下n-n_1个元素可以用来确定第二个子集。这样在确定第二个子集的时候，一共有\begin{pmatrix}
    n-n_1 \\n_1
\end{pmatrix}种方法，以此类推。$$

$$对r个阶段的选择过程利用计数准则，得到总共的选择方法数目为：$$

$$\begin{pmatrix}
    n \\n_1
\end{pmatrix}\begin{pmatrix}
    n-n_1 \\n_2
\end{pmatrix}\begin{pmatrix}
    n-n_1-n_2 \\n_3
\end{pmatrix}\cdots\begin{pmatrix}
    n-n_1-\cdots - n_{r-1} \\n_r
\end{pmatrix},$$
$上式等于：$

$$\frac{n!}{n!(n-n_1)!} \cdot \frac{(n-n_1)!}{n_2!(n-n_1-n_2)!}\cdots \frac{(n-n_1-\cdots -n_{r-1}!)}{n_r!(n-n_1-\cdots -n_{r-1}-n_r)!}.$$

$经过消去化简，上式等于：$

$$\frac{n!}{n_1n_2!\cdots n_r!}.$$

$这个数称为多项式系数，并且用下列记号表示：\begin{pmatrix}
    n\\n_1,n_2,\cdots,n_r
\end{pmatrix}$

----

### 1.7 小结和讨论
$解决一个概率问题通常分为下列几个步骤：$

$1. 描述样本空间，样本空间是一个试验的所有可能的试验结果的集合；$

$2. (可能不直接地)列出概率律(每个事件的概率)；$

$3. 计算各种事件的概率和条件概率，$

$$概率律必须满足非负性、可加性和归一性公理。$$

$计算概率的三种方法：$
1. 计数法：适用于古典概型，即试验只有有限个可能的试验的结果，而试验结果是等可能的，为计算一个事件的概率，只需清楚这个事件中的基本事件个数，再除以基本事件总数，就得到这个事件的概率。

2. 序贯树形图方法：在试验具有序贯特征的情况下，可以利用序贯树形图方法。这种方法的关键是必须相应树枝事件的条件概率。这些条件概率或者是已知的或者是利用各种方法(包括计数法)计算得到的。利用乘法规则将相应路径上的事件的条件概率相乘，就可以得到相应事件的概率。

$$3. 全概率公式：利用全概率公式可以计算事件B的概率P(B)，关键是要找到样本空间的一个分割A_i,i=1,\cdots,n,$$

$$使得相应的概率P(A_i)和条件概率P(B|A_i)为已知或比较容易计算，然后利用全概率公式计算P(B).$$