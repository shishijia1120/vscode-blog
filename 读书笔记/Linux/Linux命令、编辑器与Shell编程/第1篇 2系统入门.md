### 2 Linux系统入门

#### 2.2 登录系统
Linux支持多种登录方式：
- 本地登录：通常用于笔记本等桌面系统或服务器出现故障无法连接网络的情况。本地登录可用使用图形界面和命令行模式两种方式。 
- 远程登录：大多数用户系统和服务器都使用远程登录。远程登陆可以使用SSH、Telnet、VNC、SFTP 4种方式。


##### 2.2.1 图形界面登录

##### 2.2.2 命令行登录


##### 2.2.3 SSH远程登录
常见的远程登陆有SSH、Telnet、VNC、SFTP 4种方式。
如何在Windows和Linux系统中使用SSH远程登录：
1. Windows系统中使用SSH登录需要借助一些工具，常用的工具有PuTTY和SecureCRT等。
2. Linux系统中要使用SSH远程登录到另一个Linux系统。可以使用ssh命令加用户名和IP地址的方法。
```# ssh```

##### 2.2.6 SFTP登录
1. Windows系统中的SFTP登录
Windows系统中可以使用的SFTP登录工具有WinSCP和SecureFX，这两个工具的主要作用是从Windows主机远程登录到Linux服务器，并在二者之间进行文件传送。

2. Linux系统中的SFTP登录




#### 2.3 关闭、重启系统
Linux是一个多用户、多任务系统，如果不正确地关闭或重启系统，可能会导致系统中的用户数据丢失。

##### 2.3.1 关闭系统命令之shutdown
应该以root用户的身份执行shutdown等关闭、重启系统等命令。
1. 在1分钟后关闭系统：
    ``` # shutdown -h 1```
2. 立即关闭系统
    ```# shutdown -h now```
3. 指定时间关闭系统
    ```# shutdown -h 15:30```
当根用户发出关机指令后，系统中的其他用户可以得到如下提示：。。。。
4. shutdown命令也可用于重启系统
    ```# shutdowm -r 2```
如果正在使用系统的用户不止一个，关闭系统时应该使用shutdown命令，并采用延时关闭的方法，以避免数据丢失。


##### 2.3.2 关闭系统命令之poweroff
如果确认系统中已经没有用户存在且所有数据都已保存，需要立即关闭系统，可以使用poweroff命令。
    ```# poweroff```

##### 2.3.3 挂起系统命令halt
挂起系统通常应用于笔记本等便携设备中，与shutdown和poweroff命令不同，使用halt只会挂起系统，系统停止运行，而不会切断主机电源。
    ```# halt```
##### 2.3.4 重启系统命令reboot
   ```# reboot```

##### 2.3.5 切换系统运行级别命令init
init命令用于改变系统的运行级别，改变系统的运行级别也可以关闭或重启系统。
1. 运行级别
   - 0：停机
   - 1：单用户模式，只允许root用户登录，单用户模式一般用于对系统进行维护。
   - 2：多用户模式，用户不能使用NFS，系统会拒绝向网络中的其他计算机提供服务，一般用于维护系统。
   - 3：完全多用户模式：正常工作的运行级别
   - 4：未分配使用，
   - 5：图形模式：与运行级别3相同，只不过是用户将使用图形界面登录
   - 6：重新启动。在这一运行级别下系统会立即重新启动。

2. 使用init命令关闭、重启系统
   使用init命令立即关闭系统：
   ```# init 0```

    使用init命令立即重启系统：
    ```# init 6```

    使用init命令使，系统将会立即执行切换运行操作，因此应该先查看是否有其他用户正在使用系统。

#### 2.4 Linux命令基础及帮助

##### 2.4.1 Linux系统中的命令
1. 命令格式
```command [option] [parameter]```

(1) 命令选项可以细化命令的功能，命令的选项可以是一个或多个字母、单词。使用选项时需要注意以下事项。
   - 选项对大小写敏感
   - 命令的多个选项可能是互斥的
   - 使用选项时应该在选项前使用减号"-"，引用多个选项时可以分开写，也可以合并在一起
   - 如果选项是一个单词(通常将其称为长格式选项)，通常在选项前使用两个减号"--"，例如ls --help

(2) 参数是命令需要操作的对象：
- 如果命令有多个参数，需要使用空格分割
- 经常作为命令参数的有变量、文件名、路径等，使用时应该特别注意格式，以免系统误解
- 如果参数是一个字符串，应该将其放入双引号中。


2. 执行命令和分段命令
3. 执行多个命令
    有时想要在一行同时输入多条命令，让这些命令一条接一条地执行，此时可以使用分号";"分割多个命令。


#### 2.5 系统与用户的交互程序Shell

##### 2.5.1 Shell分类
Linux系统中安装了多个Shell，这些Shell功能各异，在用法上也大相径庭。常见的Shell：
1. Bourne Shell
2. C Shell
3. Z Shell
4. Korn Shell

##### 2.5.2 更改默认Shell
虽然Linux使用Bash作为默认Shell，但有时可能需更改默认的Shell/
1. 查看系统中安装的Shell版本
系统将安装的Shell程序列表放在/etc/shell文件中，可以通过查看该文件获取Shell列表：
    ```# cat /etc/shells ```
2. 

#### 2.6 Bash中的命令基本操作



#### 2.7 管道和输入/输出
在管理和维护Linux系统的过程中，经常需要对一个命令的输出使用一连串的命令，Bash提供的管道、输入/输出重定向功能可以轻松地完成这个任务，该功能在Linux系统中使用非常频繁。
##### 2.7.1 管道
管道的功能就像这个词本身的含义一样，不同的是现实中的管道用来引导水流，而此处的管道则用来传递文本信息。

1. 管道使用竖线|作为操作符。
   ```# command1 | command2 | command3```
系统执行上面这种命令时，会先执行命令command1，并通过管道将command1的输出结果交给命令command2处理。然后再将命令command2的结果传给下一个命令command3，这样一直将结果传递下去，直到最后一个命令。在这个过程中，管道后面的命令总是使用管道前面的命令输出作为命令的输入。

2. 许多时候需要在某个命令的输出中筛选结果。例如查看系统中是否已经安装了gcc编译器软件包：
   ```# rpm -aq | grep gcc```
上面这条命令中，先使用命令rpm -aq输出系统中已安装的所有软件包，然后利用管道将结果传递给下一条命令grep gcc。后者将从已安装的软件包列表中筛选出名称中含有gcc的行并输出。

3. 管道的另一个常见用法是辅助处理命令输出，例如要输出本地网络接口卡收发数据详情：
   ```# netstat -i | sed 'ld' | awk```

##### 2.7.2 命令的输入/输出和错误
在执行命令时，可能希望命令从某个文件中读取输入，或将命令的输出写入到文件中，这时就要使用到重定向功能。

在Linux系统中，执行每个命令系统都会访问3个文件，这3个文件分别用于接收用户的输入、输出命令的结果和命令错误信息。
访问文件又是通过文件描述符的方式实现的，命令访问3个文件及其文件描述符如下所示。
- 标准输入(默认键盘)：标准输入使用的是文件描述符0。
- 标准输出(默认为显示器)：标准输出使用的文件描述符为1.
- 标准错误(默认为显示器)：用文件描述2表示标准错误。


##### 2.7.3 重定向命令的输入/输出和错误

1. 输出重定向

    在管理和维护系统的过程中，经常需要将一个或多个组合命令的输出结果保存到文件中，以便于分析系统的状况等信息，，这时就要使用到重定向输出。重定向输出使用的操作符是">"和">>"。
\
    例如要将网络信息保存在当前目录中的netstat.txt文件中：
    ```# netstat -tunlp | sed '1,2d' | awk '{OFS="\t"} {print $6,$7}' >netstat.txt ```
    ```# cat netstat.txt```

    \
    另一个重定向的例子是使用>>操作符将内容追加到指定的文件结尾，而不是覆盖原有文件内容，这个过程就像日志文件的添加方式。
    
    例如将当前的时间追加到文件netstat.txt的最后一行：
    ```# date>>netstat.txt```

2. 输入重定向
要对一个命令输入很长的文本总是很困难的，这时可以考虑将文本输入一个文件，然后使用输入重定向的方式将文本作为命令的输入。输入重定向使用的操作符是"<"和"<<"，大多数时候输入重定向使用的是一个文件。
\
    例如要将统计到的网络接口信息以邮件的形式发送给用户user1:
    ```# mail -s 'Network status' user1 < netstat.txt ```
\
    另一个输入重定向符是"<<"，这个操作符被形象地称为here document(这儿文档)。
    ```# cat <<END```
3. 错误重定向
   
   例如将错误重定向到文件：
   ```# rm abcd 当使用rm命令删除一个不存在的文件时，命令将提示错误信息```
   ```# rm abcd 2>error```
   重定向功能成功地将错误信息写入到指定的文件中。当某个命令产生许多输出时，可以使用错误重定向的方向，将错误信息从众多命令输出中分离出来。

   \
   默认情况下，重定向符"<"和">"表示重定向输入和输出，因此在重定向错误时必须使用"2>"明确表示标准错误进行重定向。如果用户愿意，也可以在重定向输入/输出时，使用数字1、2指明要重定向的对象。如果不想看到错误信息，可以将错误信息重定向到系统垃圾池/dev/null。

4. 使用多个重定向

    例如需要检测两台主机之间的连通性，并将连通性测试的结果放入文件netstat中：
    ```# ping 192.168.1.1 -c3 &>/dev/null;echo $?`date` >netstat ```
    \
    也可以同时重定向命令的输入和输出，例如：
    ```# sed '6,13d' <netstat.txt >netstat_1```