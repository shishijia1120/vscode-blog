### 3 常用命令
#### 3.1 Linux基本命令
##### 3.1.1 切换工作目录命令cd
**命令格式**
```cd [dir]```

**参数说明**
dir表示要切换目录的路径，路径的表示方法可以是相对路径，也可以是绝对路径。如果没有任何参数，会切换工作目录至用户的家目录。

1. 切换路径
    ```cd ../```
    ```cd ../etc```
2. 快速返回家目录
    ```cd ~```
    ```cd ```
##### 3.1.2 查看当前路径命令pwd
**目录格式**
    ```pwd```
##### 3.1.3 查看文件列表命令ls
**命令格式**
    ```ls [option [filename]]```
**常用选项**
- l:以长格式显示文件列表
- d:显示目录的详细信息，而非目录中的文件列表
- a:显示隐藏文件
- k:显示文件大小时以k字节为单位
- S：按文件大小进行排序
- h：以更直观的方式查看文件列表

1. 要查看当前目录下的文件列表：
    ```# ls```   
2. 许多时候需要查看文件及目录的详细信息
    ```# ls -l```
3. 可以指定查看一个文件
    ```# ls -l /dev/sdbl```
4. 查看指定目录下的文件列表
    ```# ls -l /usr```
5. 要查看目录本身而不是其中的的文件，应使用选项d。例如查看目录/usr:
    ```# ls -ld /usr```
6. 查看隐藏文件
    ```# ls -al```

##### 3.1.4 文件链接命令ln
文件链接类似于Windows下的快捷方式，它是指向一个文件的链接。可分为硬链接和软链接。
**命令格式**
```ln [OPTION] Target Link_name```
**常用选项**
- s:创建软链接

**参数说明**
- Target:目标文件
- Link_name:创建后的软链接文件名称

**软链接文件**：一个指向目标文件的快捷方式(指向的目标文件可以不存在)
**硬链接文件**：目标文件的副本，副本在磁盘上的存储位置与目标文件一致，当一个副本的内容发生变化时，所有副本和目标文件的内容都会发生变化。


1. 创建硬链接
    ```# ln /home/user1/a /home/user1/test/b 为文件/home/user1/a建立一个硬链接文件，并命名为/home/user1/b```
    查看建立的硬链接文件：
    ```# ls -l /home/user1/test/b```
2. 创建软链接
    ```# ln -s /home/user1/a /home/user1/test1/c 使用s选项建立软链接文件```
    ```# ls -l /home/user1/test1/c 查看建立的软链接文件```

#### 3.2 文件操作命令

##### 3.2.1 文件命名规则
1. 文件命名规则

2. 文件扩展名
   Linux系统中没有文件扩展名的概念，因此在为文件命名时，不需要强制使用文件扩展名。虽然如此，有时也使用一些特殊的文件扩展后缀表示文件的用途，例如通常使用.conf结尾表示一个配置文件，.sh表示一段Shell程序，.log表示日志文件等。其中gcc编译器要求C语言的源码文件必须使用.c结尾。
3. 特殊字符和隐藏文件
    为一个文件命名时，为避免系统误解文件名，通常不建议使用特殊字符作为文件名称的一部分，如果确实需要使用特殊字符作为文件名的一部分，可以使用反斜杠"/"屏蔽这些字符的特殊含义。
   以"."号开头的文件都是隐藏文件，因此除非确实需要，否则不要使用"."号作为文件名的开头。
##### 3.2.2 创建文件命令touch
**命令格式**
```touch [option] filename```
**命令参数**
touch 命令会创建以参数filename为名称的文件，因此参数filename应该遵循文件命名规则。

1. 创建空文件
    ```# touch ab 使用touch命令创建一个空文件```
2. 创建并修改文件的时间戳记
   ```# touch -d "6/20/10 18:32" ed```
##### 3.2.3 创建目录命令mkdir
**命令格式**
```mkdir [option] dir```
\
**命令选项**
mkdir命令最常用的选项是p，它的功能是可以同时创建一个路径中的多个目录。

1. 例如要创建一个名为test的目录：
   ```# mkdir test```

2. 有时需要按路径创建目录，如果依次创建目录将会非常麻烦，这时可以配合选项p。
   ```# mkdir -p a/b/c/d/e```
##### 3.2.4 移动、重命名文件命令mv
**命令格式**
```mv Sou_file dir```

**参数说明**
- Sou_file:需要移动的文件或目录名
- dir:移动后的位置和文件名。如果此参数指定的文件已经存在，则mv将覆盖已存在的文件；若不存在，则移动文件并重命名。

1. 要将当前目录中的文件a移动到目录test中：
```# mv a test/ 将当前目录中的文件a移动到目录test中```

2. mv也可以用来移动一个目录：
   ```# mv test file/```
3. mv一次可以移动多个文件“
    ```# mv b c d file/ 将b、c、d移动到目录file中```
4. mv命令还可以用来重命名文件或目录：
   ```# mv file test 将目录file重命名为test```
##### 3.2.5 复制文件命令cp

**命令格式**
```cp [option] Source Directory```

**常用选项**
常用选项R，它可以递归的复制目录中的所有文件。

**参数说明**
- Source:要复制的源文件
- Directory:复制文件的新位置。如果此参数是一个新目录名，则将文件复制到新位置时重命名文件。

1. 复制并重命名文件
将/etc/samba/smb.conf备份到当前目录中，并将文件名重命名为smb.conf_backup：
```# cp /etc/samba/smb.conf smb.conf_backup 备份samba服务的配置文件并查看其权限变化情况```

2. 制作光盘镜像
 ```# cp /dev/cdrom linux.iso 为当前驱动中的光盘制作镜像```  
3. 复制目录
如果要复制的源目录中还存在子目录，可能会发生错误，此时可以使用选项R递归地复制子目录。
    ```# cp -R test file/```
4. 复制时保留权限
   在对文件进行复制的过程中，复制的新文件通常都具备了新的文件属主、属组和权限信息，有时可能需要保存原有文件的权限等信息，可使用p选项。
   ```# cp -p /etc/sysconfig/iptables ./backup ```
##### 3.2.6 删除文件命令rm
使用rm命令删除的文件将会直接从硬盘中删除，Linux系统中不存在回收站的概念。
**命令格式**
```rm [option] file```

**常用选项**
- r:删除目录时将目录中的所有内容一并删除
- f:忽略删除的目录中不存在的子目录，并且删除时不提示用户

1. 例如要删除文件ab:
```# rm ab 会提示用户是否确实需要删除文件```
2. 通常删除目录及目录中的所有文件和子目录时，常见的用法是配合使用选项r和f。
   ```# rm -rf test```
3. 删除目录中的所有文件时，可以使用"*"表示所有文件
   ```# rm -rf * 删除当前目录中的所有文件及目录```
##### 3.2.7 删除空目录命令rmdir
rmdir目录仅能删除空目录，大多数时候使用rm命令删除目录。

**命令格式**
```rmdir [option] directory```

1. 删除空目录file:
```# rmdir file 删除一个空目录file```

2. 使用选项p，来删除一个路径上的目录
   ```# rmdir -p a/b/c/d/ ```
##### 3.2.8 查看文件类型命令file
由于Linux系统中的文件没有使用扩展名，因此需要借助file命令来查看文件的类型。

**命令格式**
```file filename```
1. 查看文件a的文件类型：
   ```# file a```
2. 查看文件/usr/bin/file的类型：
   ```# file /usr/bin/file```
3. 查看建立的链接文件：
   ```# file b```
   ```# file -L /bin/csh 使用选项Lz追溯源文件查看文件类型```

#### 3.3 文本文件内容相关命令

##### 3.3.1 查看文本文件内容命令cat
cat命令的作用是查看文本文件内容，使用率极高。它将文本内容输出到屏幕上，然后返回Shell，适合查看行数较少的文本。

**命令格式**
```cat [option] filename```

**常用选项**
- v:显示文件中的控制字符。

1. 查看文本smb.conf的内容：
```# cat smb.conf```
2. 使用-v选项：
   ```# cat -v test.sh```

##### 3.3.2 从文本尾查看文本内容命令tail
tail命令的作用是从文本最后一行开始查看文本。管理员经常使用这个命令查看新产生的日志消息。

**命令格式**
```tail [option] filename```

**常用选项**
- n:指定查看的行数
- f:动态地显示文件内容的变化情况。

1. 要查看系统日志文件的最后几行：
    ```# tail /var/log/messages```
2. tail默认查看文件的最后10行，使用n选项，自定义行数：
    ```# tail -5 /var/log/messages```
3. 使用选项f
    ```# tail -f  /var/log/messages```

##### 3.3.3 从文本首行查看文本内容命令head
head命令将此首行开始显示文本的内容。

**命令格式**
```head [option] filename```

**常用选项**
- n:指定查看行数


##### 3.3.4 分屏显示文本内容命令more和less
- more命令
**命令格式**
```more [option] filename```
1. 使用more命令查看文件smb.conf的内容：
    ```# more smb.conf```
屏幕下方将会显示已查看的内容占整个文本的百分比，其常见的几个交互命令如下：
- Enter键：显示下一行内容
- 空格键：显示下一屏的内容
- b:显示上一屏的内容
- q:退出交互界面并返回
2. 查看较长的命令输出
   ```# rpm -aq | more 输出系统安装的所有软件并交给more显示```

- less命令
与more命令一样，less也采用分屏式的方法查看文本，不同的是less在其基础上扩展了一些功能，操作更加便捷。

**命令格式**
```less [option] filename```

1. 使用less命令查看文件smb.conf:
   ```# less smb.conf```
此时用户可以使用以下交互指令查看文本的内容：
- Page Up/Page Down:
- Home/End:
- 上、下方向键：
- /pattern:
- ?pattern:
- g/G:
- q:

##### 3.3.5 文本内容比较命令diff
有时需要比较两个文件的内容(例如制作补丁包时)，这时可以使用系统自带的diff命令。

**命令格式**
```diff [option] file1 file2```

**常用选项**
- c:以上下文的形式显示两个文件的不同之处，通常是3行
- C:以上下文的形式显示两个文件的不同之处，上下文的行数由选项指定的参数决定。
- b:忽略空格字符的不同
- B:忽略空白行的不同
- u:以合并的方式显示比较的结果
- r:递归地比较两个目录及子目录中的文件，此时的参数应该使用两个目录

1. 不加选项比较文件
    ```# diff file1 file2```
2. 使用上下文的方式对文档进行比较，例如要对示例文档进行上下文方式的比较，并设置上下文行数为1：
    ```# diff -C 1 file1 file2 设置上下文1行比较文档内容```

##### 3.3.6 文本统计命令wc
许多时候需要对一个文档或命令的输入做一个统计，例如要统计命令的输出一共有多少行，或者命令输出、文档的字数统计等，这时可以使用wc命令来完成这些工作。
**命令格式**
```wc [option] file```

**常用选项**
- c:统计文件的字节数并输出
- m:统计并显示文件的字符数
- l:统计并显示文件的行数
- L:显示文件中最长行的长度
- w:统计并输出文件的字数

1. 不加选项
    ```# wc a.txt 使用wc命令添加a.txt，依次输出行数、词数、字节数及文件名称```
2. 统计字数
    ```# wc -w a.txt 使用选项w统计文件的字数```

    ```# wc -l a.txt 使用l选项统计文件的行数```

#### 3.4 日期时间命令

##### 3.4.1 查看日期时间命令date
**命令格式**
```date [option] [+FORMAT]```
**常用选项**
- s:从指定的字符串中读取并设置当前系统的时间

1. 使用"date"命令查看当前系统时间：
```# date ```
2. 格式化输出时间
```# date +"%F %T"```
##### 3.4.2 查看日历命令cal
**命令格式**
```cal [option] [[month] year]```
**常用选项**
向其指定一个年月，以显示当月的日历

1. 直接使用
    ```# cal```
2. 指定要查看的年月
    ```# cal 2 2019```


##### 3.4.3 修改日期时间命令date和clock
由于设备的误差，有时需要手动修改系统日期和时间，也可以使用网络同步的方式修改。


#### 3.5 联线用户命令
计算机的管理员可能需要管理联线的用户，联线用户管理的内容包括查看联线的系统用户、与联线用户通信、断开联线的用户等。

##### 3.5.1 查看联线用户命令who、finger和w

1. 使用who命令查看当前系统中的用户：
    ```# who```
2. 使用finger命令查看登录到系统的用户及相关信息：
    ```# finger```
3. 使用w命令查看正在使用系统的用户
    ```# w```

    
##### 3.5.2 与联线用户通信的命令wall、write和mesg
查询到联线的用户及其详细信息之后，有时可能要向这些用户发送一些消息，这些消息可能是告知用户有关系统的一些情况，也可能是向用户发送其使用系统的情况等。按发送的消息不同，可以使用多个不同的命令。

1. 如果要向所有在线的用户发送公共、通知等消息，可以使用wall命令。
    ```# wall The system is going DOWN for system halt in 5 minutes ! 使用wall命令向系统中的所有用户发送公共```

    此时登录到系统的所有用户都会得到以下提示：
2. 要向登录到系统中的一个用户发送消息，可使用write命令。
    ```$ write root 向用户root发送消息```
    ```Hello! 输入以上命令之后将会进入即时消息模式，按Ctrl+C键退出即时消息模式```
    ```See it ?```
3. 有时用户可能不希望被其他用户的消息打扰，此时可以使用命令mesg n拒绝其他用户发送来的消息：
   如果对方拒绝消息，在发送时将会得到如下提示：
   ```$ write root 当用户请求即时消息时被用户拒绝```
   ```write:root has messages disabled```
4. 如果用户使用了命令mesg n拒绝消息，可以使用mesg y重新接受消息。


##### 3.5.3 断开联线用户命令fuser
在一些特殊情况下，需要对系统进行紧急维护，这时应该将已经联线到系统的用户强制断开，并且不允许除root以外的用户登录。

1. 紧急维护时。首先需要强制断开用户连接的终端设备，这时可以使用fuser命令/
    ```# fuser -k /dev/pts/3 断开用户连接的终端设备```
2. 紧急维护的另一种情况是禁止所有用户登录，这时可以在目录/etc中新建一个名为nologin的空文件(逐一修改每个用户的Shell为.sbin/nologin，也可以禁止用户登录，但这种方式太繁琐)，此时除root外所有用户将无法登录到系统。
    ```# touch /etc/nologin```
    此时系统将不会接受除root以外的用户登录，但是已经登录的用户将不会受到影响(即使将运行级别切换到单用户模式，系统也不会主动断开已经存在的用户连接)，所以应该使用fuser将这些用户断开。


#### 3.6 切换用户命令
一般情况下不建议使用root用户登陆系统，以免无意中损坏数据。通常的做法是使用普通用户登录并使用系统，当需要执行管理操作时，再切换到root用户执行管理操作。


##### 3.6.1 临时切换用户命令su
su命令用于临时切换到指定的用户。当用户使用此命令切换用户后，执行的操作将以切换后的用户身份执行，直到用户执行exit命令为止。
1. 切换到root用户：
    ```$ su root```
    ```# whoami```
    ```root```
    普通用户切换到root用户时，必须输入root用户的密码，root用户切换至普通用户时，可以不必输入密码

在RHEL5.3中，使用su命令虽然可以切换到root用户身份，但切换之后使用的环境变量仍然没有改变(有些系统也可以获得root用户的环境变量，例如Fedora)。
因此执行一些管理命令时，可能会提示没有找到命令，此时可以使用输入命令的全路径的方式执行相关命令(例如使用/sbin/ifconfig替代ifconfig命令)。

2. 完成相关的功能后，要退出临时使用的用户，可以使用exit命令。
    ```# exit```
    ```$ whoami```
    ```ljx```


##### 3.6.2 以root用户身份运行命令sudo
su命令虽然提供了使用rot用户身份的方法，但是将root用户密码告诉许多人是很危险的，此时可以使用sudo命令。
sudo命令工作时，先切换到root用户，并以root用户身份执行命令，然后返回到当前用户。当前用户使用sudo命令执行的操作取决于root用户在/etc/sudoers文件中的授权，即任何管理命令都需要root授权，否则不能使用sudo执行。
1. 例如要查看网络接口eth0的详细信息：
    ```$ sudo /sbin/ifconfig eth0 需输入当前用户的密码(非root用户密码)```
sudo命令不提供root用户的登录环境，因此上面的命令仍然使用全路径的方法运行ifconfig命令。



#### 3.7 定位和查找
有时需要快速搜索文件、文档、命令等，Linux为不同的内容提供了不同的快速搜索命令，


##### 3.7.1 搜索命令which
许多时候需要知道一个命令文件的位置(例如需要知道一个软件启动命令的具体位置，以便于确定软件安装位置)，这时可以使用which命令。
which命令的功能是从当前的环境变量PATH保存的目录中，查找参数指定的命令位置并以绝对路径的方式输出。
1. 查找命令文件ifconfig的位置：
    ```# which ifconfig```
2. 查看环境变量PATH所包含的目录：
    ```# echo $PATH```

当用户输入了一个命令之后，系统会在该变量所包含的目录中查找命令文件并执行找到的命令文件。


##### 3.7.2 文件搜索命令locate
locate命令用于快速搜索文件和档案，其搜索工作依赖于一个事先建立的索引数据库，这个索引数据库每天会自动更新一次，以便于搜集新增的文档。因此使用locate命令可能无法搜索到最近新增的文档。
>locate命令来自于软件slocate，不能正常使用此命令的系统可能需要手动安装此软件。

1. 查找一个名为iptables的文件:
    ```# locate iptables 查看文件名包含字符iptables的文件```
2. 查找所有以字母a开头的文档：
    ```# locate a*```
3. 由于locate命令并非使用遍历所有目录的方法查找文档(即逐文件目录查找)，因此可能查找到的结果并不是非常正确。如果要使用搜索到的结果更加准确，可以先手动更新索引数据库，然后再查找文件。
    ```# updatedb 手动更新索引数据库```

##### 3.7.3 特殊文件搜索命令whereis
whereis更加擅长于查找一些特殊的文件，这些特殊的文件包括二进制文件(通常是可执行文件)、说明文件和源代码等。同locate命令一样，whereis命令也是通过查询索引数据库的方法来搜索文件的。
1. 查找文件iptables:
   ```# whereis iptables 从特殊文件中查找文件名中包含iptables的文件```


##### 3.7.4 关键字搜索命令apropos

使用命令apropos查找与任务相关的命令，与man命令的k选项类似，都是从man手册中查找关键字，并将找到的结果显示给用户。
1. 查找与进程相关的内容：
   ```# apropos process 在帮助文档中查找与process相关的内容```


#### 3.8 输入/输出相关命令

##### 3.8.1 回显命令echo
**命令格式**
```echo [option] string```
**常用选项**
- E:禁用转义字符(默认选项)
- e:启用转义字符
- n:输出结束后不换行

1. 输出字符串
```# echo 'The first line.\nThe second line.\n 屏蔽转义字符'```
2. 使用信息e启用转义字符
    ```# echo -e "The firsr line.\n..."```
3. 有时需要获得用户的输入，获得用户输入的提示信息
    ```# echo -n "Please enter your name:"```
4. 在输出字符串中添加变量、命令输出等内容
    ```# echo "Host $HOST_DOWN_NAME non-response,time is:`date +'%Y-%m-%d%T'`"```
5. 与重定向配合输出错误信息
    ```# echo "Input error!"1>&2```

##### 3.8.2 接受用户输入命令read


**命令格式**
```read [[option] parameter] name```
**常用选项**
- a:将输入的文本按字段放入数组中(默认使用的分隔符为空格或制表符Tab)，数组的下标从0开始。
- d:指定结束符，当输入中出现指定的结束符时，read命令将认为输入已经结束(默认使用换行为结束符)
- e:从标准输入读取时，使用Readline库获取输入(此时用户可以使用退格键、方向键进行简单的行编辑操作)
- n:指定读取的字符数n
- p:将该选项指定的字符串输出到标准错误，并读取输入
- r:将读取到的字符串按字段放到不同的变量中
- s:先锁住屏幕，然后再从标准输入中读取字符
- t:如果用户在指定的时间内没有输入，就结束读取状态。
- u:从指定的文件描述符中读取

1. 提示用户并接收输入
   ```$ echo -n "please enter your name:"; read NAME; echo "Hello $NAME"!  ```

2. 读取多个数据并保存到数组中
   ```$ echo -n "please enter your friend's name:";read -a NAME;echo "Your friends:${NAME[*]}" 使用选项a将读取到的输入存入数组中，然后使用echo命令输出```
3. 指定输入结束符
   例如使用$作为输入结束符：
   ```$ echo -n "Please enter your name:"; read -d "$" NAME;echo "Hello $NAME"!```
4. 使用行编辑功能
    ```$ echo -n "lease enter your name:";read -e MESS;echo "Your message is:$MESS"```

5. 指定接收的字符长度
   ```$ echo -n "Please enter your phone number:"read -n 11 PHONE;echo -e "\n Your phone number is:"$PHONE```

6. 输出标准错误信息
    例如输出提示信息到标准错误，并接收用户的指示：
    ```$ read -p "Unexpected error, press Y key to continue."Flag;echo "Being restored, please wait..." ```
7. 读取输入并保存到多个变量中
    例如要求用户输入3个人名并保存到不同的变量中：
    ```$ echo -n "Please enter the four string:";read -r V1 V2 V3 V4;echo -e "first:$V1\nsecond:$V2\nthird:$V3\nfourth:$V4"```
    如果字段分隔符不是空格，可以通过修改变量IFS的方法重新设置分隔符。
    例如设置新的字段分隔符#，并接收用户的输入：
     ```$ IFS='#';echo -n "Please enter the four string:";read -r V1 V2 V3 V4;echo -e "first:$V1\nsecond:$V2\nthird:$V3\nfourth:$V4"```

8. 锁住屏幕
    例如要求用户输入密码：
    ```$ echo -n "Please enter your password:";read -s Pass;echo -e "\nYour password is:"$Pass```

9. 设置输入超时限制
    例如设置用户的输入时间为8秒：
    ```$ SE=y;echo -n "Please select yes or no[y|n]:";read -t 8 SE;echo -e "\nInput timeout,Use the default options[y]."```
 
##### 3.8.3 显示并保存文本命令tee
tee是一个比较常用的命令，它的作用是将获取到的数据(tee命令获取到的数据通常来自管道)分为两个拷贝，一个拷贝输出到标准输出，另一个拷贝写入到指定的文件中。
**命令格式**
```......| tee [options] filename```
**常用选项**
- a:以追加的形式将数据写入到文件的结尾。
- i:写入数据时，不写入标准错误

1. 将指定的网络接口卡信息输出到屏幕的同时也写入文件中：
    ```# ifconfig eth2 | tee eth2_info 使用tee命令将来自管道的文本输出到标准输出，并写入文件eth2_info中```
2. 有时不希望tee命令使用覆盖的方式将数据写入到文件，这时可以使用选项a，将数据以追加的形式写入文本结尾。
    ```# date +'%Y%m%d %T' | tee -a date_log```
3. tee命令还提供了简单的筛选功能，有时得到的数据中不仅含义标准输出，还含有标准错误，此时可以使用选项i忽略标准错误。
    ```# ls -l ab | tee -ia a.txt```



##### 3.8.4 邮件命令mail
mail是Linux系统中自带的电子邮件命令，通常可以用这个命令发送、阅读电子邮件。在使用脚本自动管理系统的过程中，管理员经常使用mail命令将脚本执行的结果或脚本日志发送到指定邮箱，以便于了解脚本的执行情况。

1. 发送电子邮件

**命令格式**
```# mail [option] [-s subject] [-c c_address] [-b b_adress] user [-a file]....```
**常用选项**
- n:不读入设置文件/etc/mail.rc
- s:设置邮件的主题信息
- c:使用一个密件抄送列表
- b:使用一个抄送列表

**用法示例**
  （1）发送邮件时，
     ```# mail -s "net info" root,user1 <net_info  使用mail命令向用户root和user1发送主题为net info的邮件，使用重定向的方法指定邮件的内容为文件net_info的内容```
  在上面这个示例中，由于收件人的地址为系统中的用户，因此邮件将直接发送到用户的系统邮箱中。
  （2）还可以使用外部邮箱作为地址(前提条件是网络处于可用状态)
    ```# mail -s "net info" root,user1,ne****@163.com <net_info```
这样ne****@163.com就可以收到一个来自user@localhost.localdomain的邮件(由于user@localhost.localdomain并不是一个返回的邮箱地址，因此某些邮箱可能会拒收此类邮件)。

1. 查看邮件

  （1）可以使用命令mail查看邮件列表
      ```# mail```
  （2）在邮件命令提示符中常用的命令如下。
    - h:查看邮件的标题
    - d:加序号可以删除指定的邮件
    - f:查看当前光标指向的邮件
    - n:跳转到指定序号的邮件
    - q:退出并将已经阅读的已经存入文件~/mbox中
    - x:退出
    - !:允许使用Shell命令
  (3) 退出邮件建议使用命令q，以便于将经阅读的已经存入文件~/mbox中。如果要重新阅读mbox中的邮件，可以使用选项f。
  ```# mail-f 使用f选项查看文件~/mbox中的已读邮件```
 （4）管理员使用选项f查看其它用户的邮件：
    ```# mail -f /var/spool/mail/user1 使用选项f查看用户user1的未读邮件```

##### 3.8.5 启动新Shell命令exec
exec命令用于启动一个新的Shell，并在新Shell中执行指定的命令。在实际应用中，exec命令常被用来处理文件描述符，此时(也只在此时)exec不会启动新Shell替代当前Shell。
**命令格式**
```exec shell-command```
exec执行时，会使用新的Shell替代当前Shell(而不是启动子Shell)，如果没有特别指明，exec将在命令执行完成后退出启动的新Shell。

1. 使用exec操作文件描述符的例子，使用保持指针的方法读取文件的前3行
    ```$ ecex 3<ping.txt;read -u 3 LINE;read -u 3 LINE1;read -u 3 LINE2;echo -e "$LINE \n $LINE1 \n $LINE2";exec 3<&-```
    先将文件描述符3指向文件ping.txt(此处使用的是"3<"表示一个输入文件描述符3)。然后使用read命令的选项u，从文件描述符3中读取3次，并使用命令echo输出读取到的内容。最后的命令exec 3<&-表示关闭文件描述符3。
2. 输出文件描述符：
    ```$ exec 4>name_list;echo -n "Please enter a string:";read NAME1;echo -n "Enter thr second string:";read NAME2;echo -e "The first string:"$NAME1"\nThe second string:"$NAME2 >& 4 ; exec 4>&-;cat name_list ```

    ```$ cat name_list```